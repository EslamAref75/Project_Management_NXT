module.exports=[932065,a=>{"use strict";var b=a.i(313954);function c(){let[a,c]=(0,b.useState)([]);return{toast:function({title:a,description:b,variant:c}){console.log("Toast:",a,b,c)},toasts:a}}a.s(["useToast",()=>c])},463151,a=>{"use strict";let b=(0,a.i(488966).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["default",()=>b])},22032,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(682600),e=a.i(97155),f=a.i(920931),g=a.i(167764),h=a.i(395301);let i=(0,h.createServerReference)("401fc4e21517ebfbd3eebabb3ac6ad3bf2fb7443a7",h.callServer,void 0,h.findSourceMapURL,"createUser");var j=a.i(210731),k=a.i(463151),k=k;function l({teams:a,roles:h=[]}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1);async function p(a){a.preventDefault(),o(!0);let b=new FormData(a.currentTarget),c=await i(b);o(!1),c?.success?m(!1):alert(c?.error||"Failed to create user")}return(0,b.jsxs)(e.Dialog,{open:l,onOpenChange:m,children:[(0,b.jsx)(e.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{children:[(0,b.jsx)(k.default,{className:"mr-2 h-4 w-4"}),"Create User"]})}),(0,b.jsxs)(e.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(e.DialogHeader,{children:[(0,b.jsx)(e.DialogTitle,{children:"Create User"}),(0,b.jsx)(e.DialogDescription,{children:"Create a new user with access credentials."})]}),(0,b.jsxs)("form",{onSubmit:p,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"username",children:"Username"}),(0,b.jsx)(f.Input,{id:"username",name:"username",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(f.Input,{id:"email",name:"email",type:"email",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(f.Input,{id:"password",name:"password",type:"password",required:!0,minLength:6})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"role",children:"Role"}),(0,b.jsx)("select",{id:"role",name:"role",className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:h.length>0?h.map(a=>(0,b.jsxs)("option",{value:a.name,children:[a.name,a.description?` - ${a.description}`:""]},a.id)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("option",{value:"developer",children:"Developer"}),(0,b.jsx)("option",{value:"team_lead",children:"Team Lead"}),(0,b.jsx)("option",{value:"project_manager",children:"Project Manager"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})}),0===h.length&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"No roles found. Using default roles. Please initialize RBAC system in settings."})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"teamId",children:"Assign Team (Optional)"}),(0,b.jsxs)("select",{id:"teamId",name:"teamId",className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,b.jsx)("option",{value:"",children:"No Team"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsx)(e.DialogFooter,{children:(0,b.jsxs)(d.Button,{type:"submit",disabled:n,children:[n&&(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create User"]})})]})]})]})}a.s(["UserDialog",()=>l],22032)},479010,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(682600),e=a.i(395301);let f=(0,e.createServerReference)("40abdcd9a05b7e5b6a27a4efd7412defa3f340c60c",e.callServer,void 0,e.findSourceMapURL,"deleteUser"),g=(0,e.createServerReference)("60b33fdd6fc55215f2569d47e96e5d33d33f4f707f",e.callServer,void 0,e.findSourceMapURL,"toggleUserStatus");var h=a.i(869872),i=a.i(932065),j=a.i(489158),k=a.i(285225);function l({userId:a}){let[e,l]=(0,c.useTransition)(),[m,n]=(0,c.useState)(!1),{toast:o}=(0,i.useToast)(),p=(0,j.useRouter)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:function(){confirm("Are you sure you want to delete this user? This action cannot be undone.")&&l(async()=>{let b=await f(a);b.error?"HAS_HISTORY"===b.code?n(!0):o({variant:"destructive",title:"Delete Failed",description:b.error}):(o({title:"User Deleted",description:"User has been successfully deleted."}),p.refresh())})},disabled:e,className:"text-destructive h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:(0,b.jsx)(h.Trash2,{className:"h-4 w-4"})})}),(0,b.jsx)(k.AlertDialog,{open:m,onOpenChange:n,children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"Cannot Delete User"}),(0,b.jsxs)(k.AlertDialogDescription,{children:["This user has associated history (Time Logs, Comments, etc.) that must be preserved for data integrity.",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),"Would you like to ",(0,b.jsx)("strong",{children:"deactivate"})," their account instead? This will revoke their access while keeping their data safe."]})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(k.AlertDialogAction,{onClick:function(){l(async()=>{let b=await g(a,!1);b.success?(o({title:"User Deactivated",description:"User has been deactivated successfully."}),n(!1),p.refresh()):o({variant:"destructive",title:"Deactivation Failed",description:b.error||"Failed to deactivate user."})})},children:"Deactivate User"})]})]})})]})}a.s(["UserListActions",()=>l],479010)}];

//# sourceMappingURL=nxt_New%20folder_Project_Management_NXT_4bb2db7d._.js.map