module.exports=[289788,34123,504440,205172,a=>{"use strict";var b=a.i(843991);a.s(["MoreVertical",()=>b.default],289788);var c=a.i(295394),d=a.i(313954),e=a.i(682600),f=a.i(97155),g=a.i(732378),h=a.i(920931),i=a.i(167764),j=a.i(395301);let k=(0,j.createServerReference)("601c00162e3e64028c2b657a9e3982df01dad141d5",j.callServer,void 0,j.findSourceMapURL,"updateProject");var l=a.i(879896),m=a.i(719264),n=a.i(210731),o=a.i(489158);function p({project:a,open:b,onOpenChange:j}){let[p,q]=(0,d.useState)(!1),[r,s]=(0,d.useState)([]),[t,u]=(0,d.useState)([]),[v,w]=(0,d.useState)(!0),[x,y]=(0,d.useState)(!0),[z,A]=(0,d.useState)(""),[B,C]=(0,d.useState)(""),[D,E]=(0,d.useState)(null),F=(0,o.useRouter)();async function G(b){b.preventDefault(),q(!0);let c=new FormData(b.currentTarget),d=await k(a.id,c);q(!1),d?.success?(j(!1),F.refresh()):alert(d?.error+(d?.details?`: ${d.details}`:""))}(0,d.useEffect)(()=>{!async function(){if(!b)return;w(!0),y(!0);let[c,d]=await Promise.all([(0,l.getProjectTypes)(!0),(0,m.getProjectStatuses)(!0)]);if(w(!1),y(!1),c.success){let b=c.projectTypes||[];if(s(b),a.projectTypeId)A(a.projectTypeId.toString());else if(a.type&&b.length>0){let c=b.find(b=>b.name===a.type);c&&A(c.id.toString())}}if(d.success){let b=d.projectStatuses||[],c=b.filter(a=>a.isActive);u(c);let e=null;if(a.projectStatusId?e=b.find(b=>b.id===a.projectStatusId)||null:a.status&&b.length>0&&(e=b.find(b=>b.name===a.status)||null),E(e),a.projectStatusId){let d=b.find(b=>b.id===a.projectStatusId);if(d&&d.isActive)C(a.projectStatusId.toString());else{let a=c.find(a=>a.isDefault);a?C(a.id.toString()):c.length>0&&C(c[0].id.toString())}}else if(a.status&&b.length>0){let d=b.find(b=>b.name===a.status);if(d&&d.isActive)C(d.id.toString());else{let a=c.find(a=>a.isDefault);a?C(a.id.toString()):c.length>0&&C(c[0].id.toString())}}else if(c.length>0){let a=c.find(a=>a.isDefault);a?C(a.id.toString()):C(c[0].id.toString())}}}()},[b,a.projectTypeId,a.projectStatusId,a.type,a.status]);let H=a=>{if(!a)return"";let b=new Date(a),c=b.getFullYear(),d=String(b.getMonth()+1).padStart(2,"0"),e=String(b.getDate()).padStart(2,"0");return`${c}-${d}-${e}`};return(0,c.jsx)(f.Dialog,{open:b,onOpenChange:j,children:(0,c.jsxs)(f.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,c.jsxs)(f.DialogHeader,{children:[(0,c.jsx)(f.DialogTitle,{children:"Edit Project"}),(0,c.jsx)(f.DialogDescription,{children:"Update project details, timeline, and team structure."})]}),(0,c.jsxs)("form",{onSubmit:G,children:[(0,c.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"name",children:"Project Name *"}),(0,c.jsx)(h.Input,{id:"name",name:"name",defaultValue:a.name,placeholder:"E-commerce Platform",required:!0})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"projectTypeId",children:"Project Type *"}),(0,c.jsxs)(g.Select,{name:"projectTypeId",required:!0,value:z,onValueChange:A,disabled:v,children:[(0,c.jsx)(g.SelectTrigger,{id:"projectTypeId",children:(0,c.jsx)(g.SelectValue,{placeholder:v?"Loading types...":"Select project type"})}),(0,c.jsx)(g.SelectContent,{children:0!==r.length||v?r.map(a=>(0,c.jsx)(g.SelectItem,{value:a.id.toString(),children:(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[a.color&&(0,c.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.color}}),(0,c.jsx)("span",{children:a.name})]})},a.id)):(0,c.jsx)(g.SelectItem,{value:"",disabled:!0,children:"No project types available"})})]}),(0,c.jsx)("input",{type:"hidden",name:"type",value:""})]}),(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"projectStatusId",children:"Status *"}),(0,c.jsxs)(g.Select,{name:"projectStatusId",required:!0,value:B,onValueChange:C,disabled:x,children:[(0,c.jsx)(g.SelectTrigger,{id:"projectStatusId",children:(0,c.jsx)(g.SelectValue,{placeholder:x?"Loading statuses...":"Select status"})}),(0,c.jsx)(g.SelectContent,{children:0!==t.length||x?t.map(a=>(0,c.jsx)(g.SelectItem,{value:a.id.toString(),children:(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.color}}),(0,c.jsx)("span",{children:a.name}),a.isDefault&&(0,c.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Default)"})]})},a.id)):(0,c.jsx)(g.SelectItem,{value:"",disabled:!0,children:"No active project statuses available"})})]}),(0,c.jsx)("input",{type:"hidden",name:"status",value:""})]})]}),(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"description",children:"Description"}),(0,c.jsx)("textarea",{id:"description",name:"description",defaultValue:a.description||"",placeholder:"Brief overview of the project goals and purpose...",rows:3,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"scope",children:"Project Scope"}),(0,c.jsx)("textarea",{id:"scope",name:"scope",defaultValue:a.scope||"",placeholder:"Define deliverables, features, and boundaries...",rows:3,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"startDate",children:"Start Date"}),(0,c.jsx)(h.Input,{id:"startDate",name:"startDate",type:"date",defaultValue:H(a.startDate)})]}),(0,c.jsxs)("div",{className:"grid gap-2",children:[(0,c.jsx)(i.Label,{htmlFor:"endDate",children:"Target End Date"}),(0,c.jsx)(h.Input,{id:"endDate",name:"endDate",type:"date",defaultValue:H(a.endDate)})]})]}),(0,c.jsx)("input",{type:"hidden",name:"projectManagerId",value:""})]}),(0,c.jsxs)(f.DialogFooter,{children:[(0,c.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,c.jsxs)(e.Button,{type:"submit",disabled:p,children:[p&&(0,c.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Project"]})]})]})]})})}a.s(["ProjectEditDialog",()=>p],34123);var q=a.i(285225),r=a.i(98668);let s=(0,j.createServerReference)("409f63a3c373c5a1d91cbdece6bed64e7ad1bb9de3",j.callServer,void 0,j.findSourceMapURL,"markProjectUrgent");function t({projectId:a,projectName:b,children:f}){let[g,h]=(0,d.useState)(!1),[i,j]=(0,d.useState)(!1),k=(0,o.useRouter)(),l=async b=>{b?.preventDefault(),b?.stopPropagation(),j(!0);let c=new FormData;c.append("projectId",a.toString()),c.append("reason","Project marked as urgent - requires immediate attention");try{let a=await s(c);if(console.log("Mark urgent result:",a),console.log("Result type:",typeof a),console.log("Result keys:",a?Object.keys(a):"null/undefined"),!a||"object"==typeof a&&0===Object.keys(a).length){alert("Unexpected response from server. Please check the console for details."),console.error("Empty or invalid result:",a);return}if(a.success)h(!1),k.refresh();else{let b=a.error||"Failed to mark project as urgent",c="";if(a.details)if("object"==typeof a.details){let b=Object.entries(a.details).map(([a,b])=>b&&"object"==typeof b&&"_errors"in b?`${a}: ${b._errors?.join(", ")||"Invalid"}`:`${a}: ${JSON.stringify(b)}`).join("\n");c=`

Details:
${b}`}else c=`

Details: ${a.details}`;alert(b+c),console.error("Mark urgent error:",a)}}catch(a){console.error("Mark urgent exception:",a),console.error("Error stack:",a.stack),alert(`Error: ${a.message||"An unexpected error occurred"}`)}finally{j(!1)}};return(0,c.jsxs)(q.AlertDialog,{open:g,onOpenChange:h,children:[f?(0,c.jsx)("div",{onClick:a=>{a.preventDefault(),a.stopPropagation(),h(!0)},children:f}):(0,c.jsx)(q.AlertDialogTrigger,{asChild:!0,children:(0,c.jsxs)(e.Button,{variant:"destructive",size:"sm",children:[(0,c.jsx)(r.AlertTriangle,{className:"h-4 w-4 mr-2"}),"Make Urgent"]})}),(0,c.jsxs)(q.AlertDialogContent,{children:[(0,c.jsxs)(q.AlertDialogHeader,{children:[(0,c.jsxs)(q.AlertDialogTitle,{className:"flex items-center gap-2",children:[(0,c.jsx)(r.AlertTriangle,{className:"h-5 w-5 text-red-600"}),"Confirm Urgent Priority"]}),(0,c.jsxs)(q.AlertDialogDescription,{className:"pt-2",children:["This will escalate the project as urgent and notify the team leader.",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"All assigned team members will receive high-priority notifications.",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"Are you sure you want to proceed?"]})]}),(0,c.jsxs)(q.AlertDialogFooter,{children:[(0,c.jsx)(q.AlertDialogCancel,{disabled:i,children:"Cancel"}),(0,c.jsx)(q.AlertDialogAction,{onClick:l,disabled:i,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Marking Urgent..."]}):"Confirm"})]})]})]})}a.s(["MarkUrgentDialog",()=>t],504440);var u=a.i(514750);let v=(0,j.createServerReference)("40a1ef9e59469b9018d9dca101e2d6830cd362dfa4",j.callServer,void 0,j.findSourceMapURL,"removeUrgentPriority");function w({projectId:a,projectName:b,children:f}){let[g,h]=(0,d.useState)(!1),[i,j]=(0,d.useState)(!1),k=(0,o.useRouter)(),l=async b=>{b?.preventDefault(),b?.stopPropagation(),j(!0);try{let b=await v(a);b.success?(h(!1),k.refresh()):alert(b.error||"Failed to remove urgent priority")}catch(a){console.error("Remove urgent exception:",a),alert(`Error: ${a.message||"An unexpected error occurred"}`)}finally{j(!1)}};return(0,c.jsxs)(q.AlertDialog,{open:g,onOpenChange:h,children:[f?(0,c.jsx)("div",{onClick:a=>{a.preventDefault(),a.stopPropagation(),h(!0)},children:f}):(0,c.jsx)(q.AlertDialogTrigger,{asChild:!0,children:(0,c.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,c.jsx)(u.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Remove Urgent"]})}),(0,c.jsxs)(q.AlertDialogContent,{children:[(0,c.jsxs)(q.AlertDialogHeader,{children:[(0,c.jsx)(q.AlertDialogTitle,{children:"Remove Urgent Priority"}),(0,c.jsxs)(q.AlertDialogDescription,{className:"pt-2",children:["This will change the project priority back to Normal.",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"The urgent notification will be cleared and the project will be removed from the urgent alerts section.",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"Are you sure you want to continue?"]})]}),(0,c.jsxs)(q.AlertDialogFooter,{children:[(0,c.jsx)(q.AlertDialogCancel,{disabled:i,children:"Cancel"}),(0,c.jsx)(q.AlertDialogAction,{onClick:l,disabled:i,className:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",children:i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Removing..."]}):"Confirm"})]})]})]})}a.s(["RemoveUrgentDialog",()=>w],205172)}];

//# sourceMappingURL=6ace2_lucide-react_dist_esm_icons_ellipsis-vertical_e0c59723.js.map