module.exports=[273054,a=>{"use strict";var b=a.i(555163);function c(a,...d){let e=b.constructFrom.bind(null,a||d.find(a=>"object"==typeof a));return d.map(e)}a.s(["normalizeDates",()=>c])},25254,a=>{"use strict";var b=a.i(194893);function c(a){let c=(0,b.toDate)(a),d=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()));return d.setUTCFullYear(c.getFullYear()),a-d}a.s(["getTimezoneOffsetInMilliseconds",()=>c])},269477,a=>{"use strict";var b=a.i(25254),c=a.i(273054),d=a.i(407716),e=a.i(114678);function f(a,f,g){let[h,i]=(0,c.normalizeDates)(g?.in,a,f),j=(0,e.startOfDay)(h),k=(0,e.startOfDay)(i);return Math.round((j-(0,b.getTimezoneOffsetInMilliseconds)(j)-(k-(0,b.getTimezoneOffsetInMilliseconds)(k)))/d.millisecondsInDay)}a.s(["differenceInCalendarDays",()=>f])},405002,a=>{"use strict";var b=a.i(194893);function c(a){return!(!(a instanceof Date||"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a))&&"number"!=typeof a||isNaN(+(0,b.toDate)(a)))}a.s(["isValid",()=>c],405002)},181711,a=>{"use strict";var b=a.i(184251),c=a.i(347656),d=a.i(555163),e=a.i(194893);function f(a,b){let c=(0,e.toDate)(a,b?.in).getDay();return 0===c||6===c}var g=a.i(273054),h=a.i(443585),i=a.i(269477),j=a.i(114678),k=a.i(405002);async function l(a){let b=await c.prisma.task.findUnique({where:{id:a},include:{assignees:{select:{id:!0}},dependencies:{include:{dependsOnTask:!0}}}});if(!b)return null;let l=b.estimatedHours>0?b.estimatedHours/8:1;if(b.assignees.length>0){let a=await c.prisma.task.findMany({where:{assignees:{some:{id:{in:b.assignees.map(a=>a.id)}}},status:"completed",completedAt:{not:null}},take:10,orderBy:{completedAt:"desc"},select:{estimatedHours:!0,actualHours:!0,createdAt:!0,completedAt:!0}});if(a.length>0){let c=0,d=0;a.forEach(a=>{a.estimatedHours>0&&a.actualHours>0&&(c+=a.actualHours/a.estimatedHours,d++)});let e=d>0?c/d:1.2;b.estimatedHours>0&&(l=b.estimatedHours*e/8)}}let m=new Date,n=!1;if(b.dependencies.length>0){let a=new Date;for(let c of b.dependencies){let b=c.dependsOnTask;if("completed"!==b.status&&!b.taskStatusId){let c=b.dueDate?new Date(b.dueDate):(0,h.addDays)(new Date,1);c>a&&(a=c),n=!0}}a>m&&(m=a)}let o=function(a,b,c){let g=(0,e.toDate)(a,void 0),h=f(g,void 0);if(isNaN(b))return(0,d.constructFrom)(void 0,NaN);let i=g.getHours(),j=b<0?-1:1,k=Math.trunc(b/5);g.setDate(g.getDate()+7*k);let l=Math.abs(b%5);for(;l>0;)g.setDate(g.getDate()+j),f(g,void 0)||(l-=1);h&&f(g,void 0)&&0!==b&&(6===(0,e.toDate)(g,void 0).getDay()&&g.setDate(g.getDate()+(j<0?2:-1)),0===(0,e.toDate)(g,void 0).getDay()&&g.setDate(g.getDate()+(j<0?1:-2)));return g.setHours(i),g}(m,Math.ceil(l)),p=85,q=[];n&&(p-=15,q.push("Dependent on incomplete tasks")),b.dueDate&&o>b.dueDate&&q.push("Historical velocity suggests delay"),0===b.assignees.length&&(p-=20,q.push("No assignee to gauge velocity"));let r="low";return b.dueDate&&o>b.dueDate&&(r=function(a,b,c){let[d,e]=(0,g.normalizeDates)(void 0,a,b);if(!(0,k.isValid)(d)||!(0,k.isValid)(e))return NaN;let l=(0,i.differenceInCalendarDays)(d,e),m=l<0?-1:1,n=Math.trunc(l/7),o=5*n,p=(0,h.addDays)(e,7*n);for(;!function(a,b,c){let[d,e]=(0,g.normalizeDates)(void 0,a,b);return+(0,j.startOfDay)(d)==+(0,j.startOfDay)(e)}(d,p);)o+=f(p,void 0)?0:m,p=(0,h.addDays)(p,m);return 0===o?0:o}(o,b.dueDate)>2?"high":"medium"),{taskId:a,predictedDate:o,riskLevel:r,confidence:p,explanation:q.join(", ")||"Based on average team velocity"}}var m=a.i(450246),n=a.i(915929);async function o(a){if(!await (0,m.getServerSession)(n.authOptions))return{error:"Unauthorized"};try{let b=await Promise.all(a.map(async a=>{let b=await l(a);return{taskId:a,prediction:b}})),c={};return b.forEach(a=>{c[a.taskId]=a.prediction}),{success:!0,data:c}}catch(a){return console.error("Failed to get forecasts",a),{error:"Failed to load forecasts"}}}(0,a.i(287907).ensureServerEntryExports)([o]),(0,b.registerServerReference)(o,"40014e02ec0435626c5ced3cf35fc455f331fe89cf",null),a.s(["getForecastsForTasks",()=>o],181711)},730758,a=>{"use strict";var b=a.i(962460),c=a.i(153544),d=a.i(6588),e=a.i(126695),f=a.i(723212),g=a.i(476662),h=a.i(462266),i=a.i(188417),j=a.i(181711);a.s([],947013),a.i(947013),a.s(["000fbd81a81ae8a8928c77cb3ace462c34a924fe15",()=>d.getAllTasks,"00176f3ab9f7a89d717fcba315d11e24c1f7818b0b",()=>d.getMyTasks,"0033db22356cbf8845a3517099b63dfc38d1147299",()=>b.getPublicSystemSettings,"003ae2a452e6e1e8ebee86f206a9903396d5df13b8",()=>h.getProjects,"00686a7231b739e4fe9b8305b757bc0e83827b9865",()=>c.getAllProjectsUnreadNotificationCount,"0078a5996050e1da89a66893bd05780e75185392cb",()=>g.getUsers,"40014e02ec0435626c5ced3cf35fc455f331fe89cf",()=>j.getForecastsForTasks,"4004a0aae390e2c1aeb900c79065f312ac43d90f8d",()=>c.getAllProjectsNotifications,"4009825537fe252354e189caeeedab8c017606c70b",()=>f.getTaskDependents,"401205bebba1cf3dc7d8ff35126dbeee53f67d0ee7",()=>f.getTaskDependencies,"401e3f4be30a5d5dbee04214aa788c798e018c4c21",()=>h.createProject,"401fc4e21517ebfbd3eebabb3ac6ad3bf2fb7443a7",()=>g.createUser,"402619b555ef898d642e1eaa38261c5090360b7909",()=>f.isTaskBlocked,"402c9fcdaf734573eeb364d1e92aac14ecf31bcfb9",()=>h.getProject,"402d88094f0d43ffbbdb2cc55981130389e939c098",()=>d.createTask,"403db43b4fa87e3c4395d96062ae591067c02e1975",()=>d.getTasksWithFilters,"406144e6cbbfbe91083d4680cc56756da14a65698a",()=>h.getProjectsWithFilters,"406fd270e8a350e38c78e4b79321560707aa26fd1a",()=>g.getUser,"4073df5af18efe51e33e158abaa2dd30f11932484d",()=>c.getProjectNotificationPreferences,"408efdebfc4004ac6153e7e7c6e1bfcf2efead0da8",()=>d.getTask,"4092a06687f1e4d6d11b97639f194f16619a7c015f",()=>i.getTaskStats,"40abdcd9a05b7e5b6a27a4efd7412defa3f340c60c",()=>g.deleteUser,"40b408831ea3954e375d99f8ba4ff27359527e7e4b",()=>f.createTaskDependency,"40c086aae8b4c1ddec14829c213410ee4c5d2ec0b4",()=>c.markAllProjectNotificationsAsRead,"40c45036bf2dcfbc3a3b624285c3d3d3366fc5ed73",()=>c.getProjectUnreadNotificationCount,"40daa1d9c7314de4957a7669434db12aaa24630ba4",()=>e.logActivity,"40db1cdcc45db655c6914f09995d8097bcc488bbce",()=>d.deleteTask,"40dd61ff2058f534f42f49da426a52f160b4b04ec1",()=>f.getAvailableDependencyTasks,"40fdba31998d7a3efe7c944c688cf93002e917af7b",()=>h.deleteProject,"601c00162e3e64028c2b657a9e3982df01dad141d5",()=>h.updateProject,"6020ac488ab0f44300111f3a8024b04b647106d187",()=>g.updateUserTeam,"604f3a4a12d21d9ff500f2582d8b0d2c84fbc7c29b",()=>f.removeTaskDependency,"6066449d29d31fc61eee331d63571737ef28220e06",()=>d.updateTask,"60691655a7ad6aec29ab9691d8571a0d380be93da1",()=>c.markProjectNotificationAsRead,"60b33fdd6fc55215f2569d47e96e5d33d33f4f707f",()=>g.toggleUserStatus,"60d7258dffa20b5ae58a4ac333313c2a6cc4aeb7a7",()=>c.updateProjectNotificationPreferences,"60e11d18f808d2843f4d06a35ea4ad9027dd8b4de1",()=>c.getProjectNotifications,"60e1fb0fb657783a6424ba7525af9dca8a6316a12b",()=>g.updateUser,"705f7777ed9cdc6c32f418ba57dcb7f4b84f8c002a",()=>c.createProjectNotification,"709a22b83fb95b514103e9a68c206c65a10f984982",()=>d.updateTaskStatus],730758)}];

//# sourceMappingURL=nxt_New%20folder_Project_Management_NXT_17633ccb._.js.map