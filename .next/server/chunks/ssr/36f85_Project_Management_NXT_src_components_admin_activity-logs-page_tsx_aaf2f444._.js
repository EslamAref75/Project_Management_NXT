module.exports=[13581,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(567343),e=a.i(301209),f=a.i(920931),g=a.i(682600),h=a.i(732378),i=a.i(917710),j=a.i(724627),k=a.i(400770),l=a.i(38032),m=a.i(760335),n=a.i(571529),o=a.i(126472),p=a.i(214719),q=a.i(97155);function r(){let[a,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(0),[y]=(0,c.useState)(50),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)("all"),[H,I]=(0,c.useState)("all"),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("");(0,c.useEffect)(()=>{N()},[w,B,D,F,H,J,L]);let N=async()=>{t(!0);try{let a={limit:y,offset:w*y};B&&(a.search=B),D&&"all"!==D&&(a.category=D),F&&"all"!==F&&(a.userId=parseInt(F)),H&&"all"!==H&&(a.projectId=parseInt(H)),J&&(a.startDate=new Date(J)),L&&(a.endDate=new Date(L));let b=await (0,d.getActivityLogs)(a);b.success&&(r(b.logs||[]),v(b.total||0))}catch(a){console.error("Error loading logs:",a)}finally{t(!1)}},O=()=>{x(0),N()},P=a=>{switch(a){case"auth":return"bg-blue-100 text-blue-800";case"project":return"bg-green-100 text-green-800";case"task":return"bg-purple-100 text-purple-800";case"dependency":return"bg-orange-100 text-orange-800";case"settings":return"bg-yellow-100 text-yellow-800";case"notification":return"bg-pink-100 text-pink-800";case"today_task":return"bg-cyan-100 text-cyan-800";default:return"bg-gray-100 text-gray-800"}},Q=Math.ceil(u/y);return(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Activity Logs"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"System-wide activity tracking and audit trail"})]}),(0,b.jsxs)(g.Button,{onClick:N,variant:"outline",size:"sm",children:[(0,b.jsx)(o.RefreshCw,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Filter,{className:"h-5 w-5"}),"Filters"]}),(0,b.jsx)(e.CardDescription,{children:"Filter activity logs by various criteria"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Search"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{placeholder:"Search actions...",value:B,onChange:a=>C(a.target.value),onKeyDown:a=>"Enter"===a.key&&O()}),(0,b.jsx)(g.Button,{onClick:O,size:"icon",children:(0,b.jsx)(m.Search,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Category"}),(0,b.jsxs)(h.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"All categories"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Categories"}),(0,b.jsx)(h.SelectItem,{value:"auth",children:"Authentication"}),(0,b.jsx)(h.SelectItem,{value:"project",children:"Project"}),(0,b.jsx)(h.SelectItem,{value:"task",children:"Task"}),(0,b.jsx)(h.SelectItem,{value:"dependency",children:"Dependency"}),(0,b.jsx)(h.SelectItem,{value:"settings",children:"Settings"}),(0,b.jsx)(h.SelectItem,{value:"notification",children:"Notification"}),(0,b.jsx)(h.SelectItem,{value:"today_task",children:"Today's Tasks"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Start Date"}),(0,b.jsx)(f.Input,{type:"date",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"End Date"}),(0,b.jsx)(f.Input,{type:"date",value:L,onChange:a=>M(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,b.jsx)(g.Button,{onClick:O,children:"Apply Filters"}),(0,b.jsx)(g.Button,{onClick:()=>{C(""),E("all"),G("all"),I("all"),K(""),M(""),x(0)},variant:"outline",children:"Reset"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Activity Logs"}),(0,b.jsxs)(e.CardDescription,{children:["Showing ",a.length," of ",u," total logs"]})]}),(0,b.jsxs)(e.CardContent,{children:[s?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):0===a.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No activity logs found"}):(0,b.jsx)(j.ScrollArea,{className:"h-[600px]",children:(0,b.jsxs)(p.Table,{children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{children:"Date & Time"}),(0,b.jsx)(p.TableHead,{children:"Action"}),(0,b.jsx)(p.TableHead,{children:"Actor"}),(0,b.jsx)(p.TableHead,{children:"Target"}),(0,b.jsx)(p.TableHead,{children:"Project"}),(0,b.jsx)(p.TableHead,{children:"Category"}),(0,b.jsx)(p.TableHead,{children:"Details"})]})}),(0,b.jsx)(p.TableBody,{children:a.map(a=>(0,b.jsxs)(p.TableRow,{className:"cursor-pointer",onClick:()=>A(a),children:[(0,b.jsxs)(p.TableCell,{className:"text-sm",children:[(0,l.format)(new Date(a.createdAt),"MMM dd, yyyy HH:mm:ss"),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,k.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]}),(0,b.jsxs)(p.TableCell,{children:[(0,b.jsx)("div",{className:"font-medium",children:a.actionSummary}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.actionType})]}),(0,b.jsx)(p.TableCell,{children:a.performedBy?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.performedBy.username}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.performedBy.email})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"System"})}),(0,b.jsx)(p.TableCell,{children:a.affectedUser?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.affectedUser.username}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.affectedUser.email})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(p.TableCell,{children:a.project?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.project.name}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.project.code})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(p.TableCell,{children:(0,b.jsx)(i.Badge,{className:P(a.actionCategory),children:a.actionCategory})}),(0,b.jsx)(p.TableCell,{children:a.actionDetails&&(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),A(a)},children:"View Details"})})]},a.id))})]})}),Q>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",w+1," of ",Q]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>x(Math.max(0,w-1)),disabled:0===w,children:"Previous"}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>x(Math.min(Q-1,w+1)),disabled:w>=Q-1,children:"Next"})]})]})]})]}),(0,b.jsx)(q.Dialog,{open:!!z,onOpenChange:()=>A(null),children:(0,b.jsxs)(q.DialogContent,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsx)(q.DialogTitle,{children:"Activity Log Details"}),(0,b.jsxs)(q.DialogDescription,{children:["Full details for activity log #",z?.id]})]}),z&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Action Type"}),(0,b.jsx)("div",{className:"font-medium",children:z.actionType})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),(0,b.jsx)("div",{children:(0,b.jsx)(i.Badge,{className:P(z.actionCategory),children:z.actionCategory})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Summary"}),(0,b.jsx)("div",{className:"font-medium",children:z.actionSummary})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Date & Time"}),(0,b.jsx)("div",{children:(0,l.format)(new Date(z.createdAt),"MMM dd, yyyy HH:mm:ss")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Performed By"}),(0,b.jsx)("div",{children:z.performedBy?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:z.performedBy.username}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[z.performedBy.email," (",z.performedBy.role,")"]})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"System"})})]}),z.affectedUser&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Affected User"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:z.affectedUser.username}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:z.affectedUser.email})]})]}),z.project&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Project"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:z.project.name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:z.project.code})]})]}),z.entityType&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Entity"}),(0,b.jsxs)("div",{children:[z.entityType," #",z.entityId]})]}),z.ipAddress&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"IP Address"}),(0,b.jsx)("div",{className:"font-mono text-sm",children:z.ipAddress})]}),z.userAgent&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"User Agent"}),(0,b.jsx)("div",{className:"font-mono text-xs break-all",children:z.userAgent})]})]}),z.actionDetails&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Action Details (JSON)"}),(0,b.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-auto text-xs",children:(a=>{if(!a)return null;try{let b=JSON.parse(a);return JSON.stringify(b,null,2)}catch{return a}})(z.actionDetails)})]})]})]})})]})}a.s(["ActivityLogsPage",()=>r])}];

//# sourceMappingURL=36f85_Project_Management_NXT_src_components_admin_activity-logs-page_tsx_aaf2f444._.js.map