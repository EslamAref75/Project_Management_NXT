module.exports=[801612,a=>{"use strict";var b=a.i(18703);a.s(["GripVertical",()=>b.default])},95306,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(682600),e=a.i(920931),f=a.i(167764),g=a.i(951564),h=a.i(316627),i=a.i(214719),j=a.i(97155),k=a.i(285225),l=a.i(917710),m=a.i(638236),n=a.i(126124),o=a.i(869872),p=a.i(801612),q=a.i(210731),r=a.i(879896),s=a.i(395301);let t=(0,s.createServerReference)("409bfe17a6e18c6eefdf27cc2d63cd3af4ce1159fa",s.callServer,void 0,s.findSourceMapURL,"createProjectType"),u=(0,s.createServerReference)("60f8d1074cb6207c775a9d7a0e9294b9b201443e82",s.callServer,void 0,s.findSourceMapURL,"updateProjectType"),v=(0,s.createServerReference)("405efd76e418f6527f8db1a411a5ed99a6086e285e",s.callServer,void 0,s.findSourceMapURL,"deleteProjectType"),w=(0,s.createServerReference)("40a28f296d3c75f57ff9d1ea44e224268ca46fdd85",s.callServer,void 0,s.findSourceMapURL,"toggleProjectTypeStatus");var x=a.i(932065),y=a.i(489158);function z(){let[a,s]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!0),{toast:N}=(0,x.useToast)(),O=(0,y.useRouter)();(0,c.useEffect)(()=>{P()},[]);let P=async()=>{A(!0);let a=await (0,r.getProjectTypes)(!0,!0);A(!1),a.success?s(a.projectTypes||[]):N({title:"Error",description:a.error||"Failed to load project types",variant:"destructive"})},Q=async a=>{a.preventDefault(),a.stopPropagation(),K(!0);try{let b=new FormData(a.currentTarget);b.set("isActive",L?"true":"false"),console.log("Form data:",{name:b.get("name"),description:b.get("description"),isActive:b.get("isActive"),displayOrder:b.get("displayOrder"),color:b.get("color"),icon:b.get("icon")});let c=F?await u(F.id,b):await t(b);if(console.log("Server result:",c),c.success)N({title:"Success",description:F?"Project type updated successfully":"Project type created successfully"}),C(!1),G(null),M(!0),P(),O.refresh();else{console.error("Error result:",c);let a=c.error||"Failed to save project type",b=c.details?`

Details: ${JSON.stringify(c.details)}`:"";N({title:"Error",description:a+b,variant:"destructive"})}}catch(a){console.error("Exception in handleSubmit:",a),N({title:"Error",description:a.message||"An unexpected error occurred",variant:"destructive"})}finally{K(!1)}},R=async()=>{if(!H)return;K(!0);let a=await v(H.id);K(!1),a.success?(N({title:"Success",description:"Project type deleted successfully"}),E(!1),I(null),P(),O.refresh()):N({title:"Error",description:a.error||"Failed to delete project type",variant:"destructive"})},S=async a=>{let b=await w(a.id);b.success?(N({title:"Success",description:`Project type ${a.isActive?"deactivated":"activated"}`}),P(),O.refresh()):N({title:"Error",description:b.error||"Failed to toggle status",variant:"destructive"})};return z?(0,b.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,b.jsx)(q.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Project Types"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage project types that can be assigned to projects"})]}),(0,b.jsxs)(j.Dialog,{open:B,onOpenChange:C,children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{G(null),M(!0),C(!0)},children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Add Project Type"]})}),(0,b.jsxs)(j.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:F?"Edit Project Type":"Create Project Type"}),(0,b.jsx)(j.DialogDescription,{children:F?"Update the project type details":"Add a new project type to the system"})]}),(0,b.jsxs)("form",{onSubmit:Q,children:[(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"name",children:"Name *"}),(0,b.jsx)(e.Input,{id:"name",name:"name",defaultValue:F?.name||"",required:!0,maxLength:100})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(g.Textarea,{id:"description",name:"description",defaultValue:F?.description||"",rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"color",children:"Color (hex)"}),(0,b.jsx)(e.Input,{id:"color",name:"color",type:"color",defaultValue:F?.color||"#3b82f6"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"icon",children:"Icon Name"}),(0,b.jsx)(e.Input,{id:"icon",name:"icon",defaultValue:F?.icon||"",placeholder:"e.g., Folder, Briefcase"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"displayOrder",children:"Display Order"}),(0,b.jsx)(e.Input,{id:"displayOrder",name:"displayOrder",type:"number",defaultValue:F?.displayOrder||0,min:0})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Switch,{id:"isActive",checked:L,onCheckedChange:M}),(0,b.jsx)(f.Label,{htmlFor:"isActive",children:"Active"})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{C(!1),G(null),M(!0)},disabled:J,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:J,children:J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):F?"Update":"Create"})]})]})]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{className:"w-12"}),(0,b.jsx)(i.TableHead,{children:"Name"}),(0,b.jsx)(i.TableHead,{children:"Description"}),(0,b.jsx)(i.TableHead,{children:"Order"}),(0,b.jsx)(i.TableHead,{children:"Usage"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:0===a.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No project types found. Create one to get started."})}):a.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(p.GripVertical,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.color&&(0,b.jsx)("div",{className:"h-4 w-4 rounded",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]})}),(0,b.jsx)(i.TableCell,{className:"max-w-md truncate",children:a.description||"-"}),(0,b.jsx)(i.TableCell,{children:a.displayOrder}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)(l.Badge,{variant:"outline",children:[a.usageCount||0," project",1!==a.usageCount?"s":""]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(l.Badge,{variant:a.isActive?"default":"secondary",children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(h.Switch,{checked:a.isActive,onCheckedChange:()=>S(a)}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{G(a),M(a.isActive),C(!0)},children:(0,b.jsx)(n.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{I(a),E(!0)},children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},a.id))})]})}),(0,b.jsx)(k.AlertDialog,{open:D,onOpenChange:E,children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"Delete Project Type"}),(0,b.jsxs)(k.AlertDialogDescription,{children:['Are you sure you want to delete "',H?.name,'"? This action cannot be undone.']})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{disabled:J,children:"Cancel"}),(0,b.jsx)(k.AlertDialogAction,{onClick:R,disabled:J,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}a.s(["ProjectTypesPanel",()=>z],95306)},959116,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(682600),e=a.i(920931),f=a.i(167764),g=a.i(316627),h=a.i(214719),i=a.i(97155),j=a.i(285225),k=a.i(917710),l=a.i(638236),m=a.i(126124),n=a.i(869872),o=a.i(801612),p=a.i(210731),q=a.i(719264),r=a.i(395301);let s=(0,r.createServerReference)("40a74427d2644bccb6484ef387adfb75292463f76d",r.callServer,void 0,r.findSourceMapURL,"createProjectStatus"),t=(0,r.createServerReference)("604f6e533c8ca2a4912a1ac71147f742593e73c415",r.callServer,void 0,r.findSourceMapURL,"updateProjectStatus"),u=(0,r.createServerReference)("40ec2af0f521f12446e739887e5c43eaec70fae9f8",r.callServer,void 0,r.findSourceMapURL,"deleteProjectStatus"),v=(0,r.createServerReference)("40175cc470e34c2839ab0cca8512ab71fda5f72bb6",r.callServer,void 0,r.findSourceMapURL,"toggleProjectStatusActive");var w=a.i(932065),x=a.i(489158);function y(){let[a,r]=(0,c.useState)([]),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!0),{toast:Q}=(0,w.useToast)(),R=(0,x.useRouter)();(0,c.useEffect)(()=>{S()},[]);let S=async()=>{z(!0);let a=await (0,q.getProjectStatuses)(!0);z(!1),a.success?r(a.projectStatuses||[]):Q({title:"Error",description:a.error||"Failed to load project statuses",variant:"destructive"})},T=async a=>{a.preventDefault(),a.stopPropagation(),J(!0);try{let b=new FormData(a.currentTarget);b.set("isDefault",K?"true":"false"),b.set("isFinal",M?"true":"false"),b.set("isActive",O?"true":"false"),console.log("Form data:",{name:b.get("name"),color:b.get("color"),isDefault:b.get("isDefault"),isFinal:b.get("isFinal"),orderIndex:b.get("orderIndex"),isActive:b.get("isActive")});let c=E?await t(E.id,b):await s(b);if(console.log("Server result:",c),c.success)Q({title:"Success",description:E?"Project status updated successfully":"Project status created successfully"}),B(!1),F(null),L(!1),N(!1),P(!0),S(),R.refresh();else{let a=c.error||"Failed to save project status",b=c.details?`

Details: ${JSON.stringify(c.details)}`:"";Q({title:"Error",description:a+b,variant:"destructive"})}}catch(a){console.error("Exception in handleSubmit:",a),Q({title:"Error",description:a.message||"An unexpected error occurred",variant:"destructive"})}finally{J(!1)}},U=async()=>{if(!G)return;J(!0);let a=await u(G.id);J(!1),a.success?(Q({title:"Success",description:"Project status deleted successfully"}),D(!1),H(null),S(),R.refresh()):Q({title:"Error",description:a.error||"Failed to delete project status",variant:"destructive"})},V=async a=>{let b=await v(a.id);b.success?(Q({title:"Success",description:`Project status ${a.isActive?"deactivated":"activated"}`}),S(),R.refresh()):Q({title:"Error",description:b.error||"Failed to toggle status",variant:"destructive"})};return y?(0,b.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,b.jsx)(p.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Project Statuses"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage project lifecycle states. Define workflow order and final states."})]}),(0,b.jsxs)(i.Dialog,{open:A,onOpenChange:B,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{F(null),L(!1),N(!1),P(!0),B(!0),setTimeout(()=>{let a="#6b7280",b=document.getElementById("colorPicker"),c=document.getElementById("colorText"),d=document.getElementById("color");b&&(b.value=a),c&&(c.value=a),d&&(d.value=a)},100)},children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Add Project Status"]})}),(0,b.jsxs)(i.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:E?"Edit Project Status":"Create Project Status"}),(0,b.jsx)(i.DialogDescription,{children:E?"Update the project status details":"Add a new project status to the system"})]}),(0,b.jsxs)("form",{onSubmit:T,children:[(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"name",children:"Status Name *"}),(0,b.jsx)(e.Input,{id:"name",name:"name",defaultValue:E?.name||"",required:!0,maxLength:100})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"color",children:"Color *"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Input,{id:"colorPicker",type:"color",defaultValue:E?.color||"#6b7280",className:"w-20 h-10",onChange:a=>{let b=document.getElementById("colorText"),c=document.getElementById("color");b&&(b.value=a.target.value),c&&(c.value=a.target.value)}}),(0,b.jsx)(e.Input,{id:"colorText",type:"text",defaultValue:E?.color||"#6b7280",placeholder:"#6b7280",pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1",onChange:a=>{let b=document.getElementById("colorPicker"),c=document.getElementById("color");b&&/^#[0-9A-Fa-f]{6}$/.test(a.target.value)&&(b.value=a.target.value),c&&(c.value=a.target.value)}}),(0,b.jsx)("input",{id:"color",name:"color",type:"hidden",defaultValue:E?.color||"#6b7280"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"orderIndex",children:"Order Index"}),(0,b.jsx)(e.Input,{id:"orderIndex",name:"orderIndex",type:"number",defaultValue:E?.orderIndex||0,min:0})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"hidden",name:"isDefault",value:K?"true":"false"}),(0,b.jsx)("input",{type:"hidden",name:"isFinal",value:M?"true":"false"}),(0,b.jsx)("input",{type:"hidden",name:"isActive",value:O?"true":"false"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isDefault",checked:K,onCheckedChange:L}),(0,b.jsx)(f.Label,{htmlFor:"isDefault",children:"Default Status"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-8",children:"Only one status can be the default. Setting this will unset others."}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isFinal",checked:M,onCheckedChange:N}),(0,b.jsx)(f.Label,{htmlFor:"isFinal",children:"Final Status"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-8",children:"Final statuses prevent projects from moving to other statuses."}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isActive",checked:O,onCheckedChange:P}),(0,b.jsx)(f.Label,{htmlFor:"isActive",children:"Active"})]})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{B(!1),F(null),L(!1),N(!1),P(!0)},disabled:I,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:I,children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):E?"Update":"Create"})]})]})]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{className:"w-12"}),(0,b.jsx)(h.TableHead,{children:"Name"}),(0,b.jsx)(h.TableHead,{children:"Color"}),(0,b.jsx)(h.TableHead,{children:"Order"}),(0,b.jsx)(h.TableHead,{children:"Default"}),(0,b.jsx)(h.TableHead,{children:"Final"}),(0,b.jsx)(h.TableHead,{children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:0===a.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No project statuses found. Create one to get started."})}):a.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(o.GripVertical,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 rounded",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 rounded",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.color})]})}),(0,b.jsx)(h.TableCell,{children:a.orderIndex}),(0,b.jsx)(h.TableCell,{children:a.isDefault?(0,b.jsx)(k.Badge,{variant:"default",children:"Default"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(h.TableCell,{children:a.isFinal?(0,b.jsx)(k.Badge,{variant:"secondary",children:"Final"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(k.Badge,{variant:a.isActive?"default":"secondary",children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(g.Switch,{checked:a.isActive,onCheckedChange:()=>V(a)}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{F(a),L(a.isDefault),N(a.isFinal),P(a.isActive),B(!0),setTimeout(()=>{let b=a.color||"#6b7280",c=document.getElementById("colorPicker"),d=document.getElementById("colorText"),e=document.getElementById("color");c&&(c.value=b),d&&(d.value=b),e&&(e.value=b)},100)},children:(0,b.jsx)(m.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{H(a),D(!0)},children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},a.id))})]})}),(0,b.jsx)(j.AlertDialog,{open:C,onOpenChange:D,children:(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Delete Project Status"}),(0,b.jsxs)(j.AlertDialogDescription,{children:['Are you sure you want to delete "',G?.name,'"? This action cannot be undone. If any projects are using this status, you must deactivate it instead of deleting.']})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{disabled:I,children:"Cancel"}),(0,b.jsx)(j.AlertDialogAction,{onClick:U,disabled:I,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}a.s(["ProjectStatusesPanel",()=>y],959116)},826090,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(682600),e=a.i(920931),f=a.i(167764),g=a.i(316627),h=a.i(214719),i=a.i(97155),j=a.i(285225),k=a.i(917710),l=a.i(638236),m=a.i(126124),n=a.i(869872),o=a.i(801612),p=a.i(210731),q=a.i(434805),r=a.i(395301);let s=(0,r.createServerReference)("409ffaa16924c74c678cf301d6dd2c99296e10aaeb",r.callServer,void 0,r.findSourceMapURL,"createTaskStatus"),t=(0,r.createServerReference)("60f41f919904eb5c1356712769a66aa6e55829aaab",r.callServer,void 0,r.findSourceMapURL,"updateTaskStatus"),u=(0,r.createServerReference)("40fe576746d9067777bbe9321cc75cceccb9421471",r.callServer,void 0,r.findSourceMapURL,"deleteTaskStatus"),v=(0,r.createServerReference)("40efaf506c057383e8b5ff321991a6dfa7996990f0",r.callServer,void 0,r.findSourceMapURL,"toggleTaskStatusActive");var w=a.i(932065),x=a.i(489158);function y(){let[a,r]=(0,c.useState)([]),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!0),{toast:S}=(0,w.useToast)(),T=(0,x.useRouter)();(0,c.useEffect)(()=>{U()},[]);let U=async()=>{z(!0);let a=await (0,q.getTaskStatuses)(!0);z(!1),a.success?r(a.taskStatuses||[]):S({title:"Error",description:a.error||"Failed to load task statuses",variant:"destructive"})},V=async a=>{a.preventDefault(),a.stopPropagation(),J(!0);try{let b=new FormData(a.currentTarget);b.set("isDefault",K?"true":"false"),b.set("isFinal",M?"true":"false"),b.set("isBlocking",O?"true":"false"),b.set("isActive",Q?"true":"false");let c=E?await t(E.id,b):await s(b);if(c.success)S({title:"Success",description:E?"Task status updated successfully":"Task status created successfully"}),B(!1),F(null),L(!1),N(!1),P(!1),R(!0),U(),T.refresh();else{let a=c.error||"Failed to save task status",b=c.details?`

Details: ${JSON.stringify(c.details)}`:"";S({title:"Error",description:a+b,variant:"destructive"})}}catch(a){S({title:"Error",description:a.message||"An unexpected error occurred",variant:"destructive"})}finally{J(!1)}},W=async()=>{if(!G)return;let a=await u(G.id);a.success?(S({title:"Success",description:"Task status deleted successfully"}),U(),T.refresh()):S({title:"Error",description:a.error||"Failed to delete task status",variant:"destructive"}),D(!1),H(null)},X=async a=>{let b=await v(a.id);b.success?(S({title:"Success",description:`Task status ${b.taskStatus?.isActive?"activated":"deactivated"}`}),U(),T.refresh()):S({title:"Error",description:b.error||"Failed to toggle task status",variant:"destructive"})};return y?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(p.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Task Statuses"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage task workflow statuses. Define which statuses are final, blocking, or default."})]}),(0,b.jsxs)(i.Dialog,{open:A,onOpenChange:B,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{F(null),L(!1),N(!1),P(!1),R(!0),B(!0)},children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Add Status"]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:E?"Edit Task Status":"Create Task Status"}),(0,b.jsx)(i.DialogDescription,{children:E?"Update the task status details.":"Add a new task status to the system."})]}),(0,b.jsxs)("form",{onSubmit:V,children:[(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"name",children:"Status Name *"}),(0,b.jsx)(e.Input,{id:"name",name:"name",defaultValue:E?.name||"",placeholder:"e.g., In Progress",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"color",children:"Color *"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Input,{id:"colorPicker",type:"color",defaultValue:E?.color||"#6b7280",className:"w-20 h-10",onChange:a=>{let b=document.getElementById("colorText"),c=document.getElementById("color");b&&(b.value=a.target.value),c&&(c.value=a.target.value)}}),(0,b.jsx)(e.Input,{id:"colorText",type:"text",defaultValue:E?.color||"#6b7280",placeholder:"#6b7280",pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1",onChange:a=>{let b=document.getElementById("colorPicker"),c=document.getElementById("color");b&&/^#[0-9A-Fa-f]{6}$/.test(a.target.value)&&(b.value=a.target.value),c&&(c.value=a.target.value)}}),(0,b.jsx)("input",{id:"color",name:"color",type:"hidden",defaultValue:E?.color||"#6b7280"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"orderIndex",children:"Order Index"}),(0,b.jsx)(e.Input,{id:"orderIndex",name:"orderIndex",type:"number",defaultValue:E?.orderIndex||0,min:0})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"hidden",name:"isDefault",value:K?"true":"false"}),(0,b.jsx)("input",{type:"hidden",name:"isFinal",value:M?"true":"false"}),(0,b.jsx)("input",{type:"hidden",name:"isBlocking",value:O?"true":"false"}),(0,b.jsx)("input",{type:"hidden",name:"isActive",value:Q?"true":"false"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isDefault",checked:K,onCheckedChange:L}),(0,b.jsx)(f.Label,{htmlFor:"isDefault",children:"Default Status"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-8",children:"Only one status can be the default. Setting this will unset others."}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isFinal",checked:M,onCheckedChange:N}),(0,b.jsx)(f.Label,{htmlFor:"isFinal",children:"Final Status"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-8",children:"Tasks in final status cannot be edited."}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isBlocking",checked:O,onCheckedChange:P}),(0,b.jsx)(f.Label,{htmlFor:"isBlocking",children:"Blocking Status"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-8",children:"Tasks in blocking status prevent dependent tasks from starting."}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Switch,{id:"isActive",checked:Q,onCheckedChange:R}),(0,b.jsx)(f.Label,{htmlFor:"isActive",children:"Active"})]})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{B(!1),F(null),L(!1),N(!1),P(!1),R(!0)},disabled:I,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:I,children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):E?"Update":"Create"})]})]})]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{className:"w-12"}),(0,b.jsx)(h.TableHead,{children:"Name"}),(0,b.jsx)(h.TableHead,{children:"Color"}),(0,b.jsx)(h.TableHead,{children:"Order"}),(0,b.jsx)(h.TableHead,{children:"Default"}),(0,b.jsx)(h.TableHead,{children:"Final"}),(0,b.jsx)(h.TableHead,{children:"Blocking"}),(0,b.jsx)(h.TableHead,{children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:0===a.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No task statuses found. Create one to get started."})}):a.sort((a,b)=>a.orderIndex-b.orderIndex).map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(o.GripVertical,{className:"h-4 w-4 text-muted-foreground cursor-move"})}),(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 rounded-full border",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.color})]})}),(0,b.jsx)(h.TableCell,{children:a.orderIndex}),(0,b.jsx)(h.TableCell,{children:a.isDefault?(0,b.jsx)(k.Badge,{variant:"default",children:"Default"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(h.TableCell,{children:a.isFinal?(0,b.jsx)(k.Badge,{variant:"secondary",children:"Final"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(h.TableCell,{children:a.isBlocking?(0,b.jsx)(k.Badge,{variant:"destructive",children:"Blocking"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(k.Badge,{variant:a.isActive?"default":"secondary",children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{F(a),L(a.isDefault),N(a.isFinal),P(a.isBlocking),R(a.isActive),B(!0)},children:(0,b.jsx)(m.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>X(a),children:a.isActive?"Deactivate":"Activate"}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{H(a),D(!0)},children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},a.id))})]})}),(0,b.jsx)(j.AlertDialog,{open:C,onOpenChange:D,children:(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Delete Task Status"}),(0,b.jsxs)(j.AlertDialogDescription,{children:['Are you sure you want to delete "',G?.name,'"? This action cannot be undone.',G&&(0,b.jsx)("span",{className:"block mt-2 text-sm text-muted-foreground",children:"Note: Statuses assigned to existing tasks cannot be deleted. Deactivate them instead."})]})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(j.AlertDialogAction,{onClick:W,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}a.s(["TaskStatusesPanel",()=>y],826090)}];

//# sourceMappingURL=nxt_New%20folder_Project_Management_NXT_d9ca0df9._.js.map