module.exports=[854895,a=>{"use strict";var b=a.i(295394),c=a.i(313954),d=a.i(489158),e=a.i(920931),f=a.i(760335),g=a.i(66796),h=a.i(682600);function i({value:a,onChange:c,onClear:d}){return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(e.Input,{type:"text",placeholder:"Search tasks by name, ID, project, or assignee...",value:a,onChange:a=>c(a.target.value),className:"pl-10 pr-10"}),a&&(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2",onClick:d,children:(0,b.jsx)(g.X,{className:"h-4 w-4"})})]})}var j=a.i(301209),k=a.i(167764),l=a.i(732378),m=a.i(917710),n=a.i(571529),o=a.i(322695),p=a.i(586561),q=a.i(877103);let r=["pending","in_progress","review","waiting","completed"],s=["low","normal","high","urgent"],t=[{value:"all",label:"All Tasks"},{value:"blocked",label:"Blocked"},{value:"free",label:"Free"},{value:"blocking",label:"Blocking Others"}];function u({projectFilter:a,onProjectChange:c,statusFilter:d,onStatusChange:e,priorityFilter:f,onPriorityChange:i,assigneeFilter:u,onAssigneeChange:v,dependencyState:w,onDependencyStateChange:x,dateRange:y,onDateRangeChange:z,dateFilterType:A,onDateFilterTypeChange:B,projects:C,users:D,currentUserId:E,onClear:F}){let G=a.length>0||d.length>0||f.length>0||"all"!==u||"all"!==w||y.start||y.end;return(0,b.jsx)(j.Card,{children:(0,b.jsx)(j.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Project"}),(0,b.jsxs)(o.Popover,{children:[(0,b.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"h-9",children:[(0,b.jsx)(n.Filter,{className:"h-4 w-4 mr-2"}),"Project",a.length>0&&(0,b.jsx)(m.Badge,{variant:"secondary",className:"ml-2",children:a.length})]})}),(0,b.jsx)(o.PopoverContent,{className:"w-56",align:"start",children:(0,b.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:C.map(d=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(q.Checkbox,{id:`proj-${d.id}`,checked:a.includes(d.id.toString()),onCheckedChange:()=>{var b;return b=d.id.toString(),void(a.includes(b)?c(a.filter(a=>a!==b)):c([...a,b]))}}),(0,b.jsx)("label",{htmlFor:`proj-${d.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:d.name})]},d.id))})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Status"}),(0,b.jsxs)(o.Popover,{children:[(0,b.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"h-9",children:[(0,b.jsx)(n.Filter,{className:"h-4 w-4 mr-2"}),"Status",d.length>0&&(0,b.jsx)(m.Badge,{variant:"secondary",className:"ml-2",children:d.length})]})}),(0,b.jsx)(o.PopoverContent,{className:"w-56",align:"start",children:(0,b.jsx)("div",{className:"space-y-2",children:r.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(q.Checkbox,{id:`status-${a}`,checked:d.includes(a),onCheckedChange:()=>{d.includes(a)?e(d.filter(b=>b!==a)):e([...d,a])}}),(0,b.jsx)("label",{htmlFor:`status-${a}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 capitalize cursor-pointer",children:a.replace("_"," ")})]},a))})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Priority"}),(0,b.jsxs)(o.Popover,{children:[(0,b.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"h-9",children:[(0,b.jsx)(n.Filter,{className:"h-4 w-4 mr-2"}),"Priority",f.length>0&&(0,b.jsx)(m.Badge,{variant:"secondary",className:"ml-2",children:f.length})]})}),(0,b.jsx)(o.PopoverContent,{className:"w-56",align:"start",children:(0,b.jsx)("div",{className:"space-y-2",children:s.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(q.Checkbox,{id:`prio-${a}`,checked:f.includes(a),onCheckedChange:()=>{f.includes(a)?i(f.filter(b=>b!==a)):i([...f,a])}}),(0,b.jsx)("label",{htmlFor:`prio-${a}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 capitalize cursor-pointer",children:a})]},a))})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Assignee"}),(0,b.jsxs)(l.Select,{value:u,onValueChange:v,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[150px] h-9",children:(0,b.jsx)(l.SelectValue,{placeholder:"All Users"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Users"}),(0,b.jsx)(l.SelectItem,{value:"me",children:"Me"}),D.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.username},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Dependency"}),(0,b.jsxs)(l.Select,{value:w,onValueChange:x,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[160px] h-9",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsx)(l.SelectContent,{children:t.map(a=>(0,b.jsx)(l.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Date"}),(0,b.jsx)(o.Popover,{children:(0,b.jsx)(p.DatePickerWithRange,{date:{from:y.start,to:y.end},setDate:a=>{z({start:a?.from,end:a?.to})},className:"w-[240px]"})})]}),G&&(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:F,children:[(0,b.jsx)(g.X,{className:"h-4 w-4 mr-2"}),"Clear All"]})})]})})})}var v=a.i(533208),w=a.i(104626),x=a.i(401149);function y({viewMode:a,onViewChange:c}){return(0,b.jsxs)("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[(0,b.jsxs)(h.Button,{variant:"card"===a?"default":"ghost",size:"sm",onClick:()=>c("card"),className:(0,x.cn)("h-8","card"===a&&"bg-primary text-primary-foreground"),children:[(0,b.jsx)(v.LayoutGrid,{className:"h-4 w-4 mr-2"}),"Cards"]}),(0,b.jsxs)(h.Button,{variant:"table"===a?"default":"ghost",size:"sm",onClick:()=>c("table"),className:(0,x.cn)("h-8","table"===a&&"bg-primary text-primary-foreground"),children:[(0,b.jsx)(w.Table,{className:"h-4 w-4 mr-2"}),"Table"]})]})}var z=a.i(443161),A=a.i(515790),B=a.i(38032),C=a.i(631375),D=a.i(357797),D=D,E=a.i(65290),F=a.i(146886),G=a.i(514750),H=a.i(107346),I=a.i(795342),I=I,J=a.i(759968);function K({forecast:a,dueDate:c,compact:d=!1}){if(!a)return null;let{style:e,icon:f}=(a=>{switch(a){case"high":return{style:"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-900",icon:F.AlertCircle};case"medium":return{style:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-900",icon:H.Clock};case"low":return{style:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-900",icon:G.CheckCircle2};default:return{style:"bg-muted text-muted-foreground",icon:I.default}}})(a.riskLevel),g=new Date(a.predictedDate).toLocaleDateString(void 0,{month:"short",day:"numeric"}),h=c&&new Date(a.predictedDate)>new Date(c);return d?(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("div",{className:(0,x.cn)("flex items-center justify-center p-1 rounded-full w-6 h-6",e),children:(0,b.jsx)(f,{className:"w-3.5 h-3.5"})})}),(0,b.jsxs)(J.TooltipContent,{children:[(0,b.jsx)("p",{className:"font-semibold",children:"high"===a.riskLevel?"High Risk":"Forecast"}),(0,b.jsxs)("p",{className:"text-xs",children:["Pred: ",g," (",a.confidence,"% conf)"]}),(0,b.jsx)("p",{className:"text-xs opacity-70 mt-1",children:a.explanation})]})]})}):(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)(m.Badge,{variant:"outline",className:(0,x.cn)("gap-1.5 cursor-help pl-1.5 pr-2.5 py-0.5",e),children:[(0,b.jsx)(f,{className:"w-3.5 h-3.5"}),(0,b.jsxs)("span",{className:"flex flex-col items-start leading-tight",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-80",children:"high"===a.riskLevel?"At Risk":"Forecast"}),(0,b.jsx)("span",{className:"text-xs font-semibold",children:h?`Late by ${g}`:`On Track (${g})`})]})]})}),(0,b.jsxs)(J.TooltipContent,{className:"max-w-[200px] text-xs",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:"Why this forecast?"}),(0,b.jsx)("p",{children:a.explanation}),(0,b.jsxs)("div",{className:"mt-2 pt-2 border-t flex justify-between opacity-70",children:[(0,b.jsx)("span",{children:"Confidence:"}),(0,b.jsxs)("span",{children:[a.confidence,"%"]})]})]})]})})}var L=a.i(47065);function M({tasks:a,total:c,page:d,limit:e,onPageChange:f,forecasts:g}){let h=Math.ceil(c/e),i={pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",in_progress:"bg-blue-500/10 text-blue-500 border-blue-500/20",review:"bg-purple-500/10 text-purple-500 border-purple-500/20",completed:"bg-green-500/10 text-green-500 border-green-500/20",waiting:"bg-orange-500/10 text-orange-500 border-orange-500/20"},k={urgent:"bg-red-500/10 text-red-500 border-red-500/20",high:"bg-orange-500/10 text-orange-500 border-orange-500/20",normal:"bg-blue-500/10 text-blue-500 border-blue-500/20",low:"bg-gray-500/10 text-gray-500 border-gray-500/20"};return 0===a.length?(0,b.jsxs)("div",{className:"flex min-h-[400px] flex-col items-center justify-center rounded-md border border-dashed p-8 text-center",children:[(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No tasks found"}),(0,b.jsx)("p",{className:"mb-4 mt-2 text-sm text-muted-foreground max-w-sm",children:"Try adjusting your filters or create a new task."})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>{let c="waiting"===a.status||!!a.dependencies&&a.dependencies.length>0&&a.dependencies.some(a=>"completed"!==a.dependsOnTask.status),d=!!a.dueDate&&new Date(a.dueDate)<new Date&&"completed"!==a.status,e=(a=>{if(!a.plannedDate)return!1;let b=new Date;return new Date(a.plannedDate).toDateString()===b.toDateString()&&"completed"!==a.status})(a);return(0,b.jsx)(z.default,{href:`/dashboard/projects/${a.projectId}/tasks/${a.id}`,children:(0,b.jsxs)(j.Card,{className:(0,x.cn)("transition-shadow hover:shadow-md h-full cursor-pointer",c&&"border-orange-500/50",d&&"border-red-500/50",e&&"border-blue-500/50 bg-blue-50/50"),children:[(0,b.jsxs)(j.CardHeader,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[(0,b.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.CardTitle,{className:"text-base font-semibold leading-none line-clamp-2",children:a.title}),c&&(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{children:(0,b.jsx)(D.default,{className:"h-4 w-4 text-orange-500 shrink-0"})}),(0,b.jsx)(J.TooltipContent,{children:(0,b.jsx)("p",{children:"Waiting on dependency"})})]})})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(m.Badge,{variant:"outline",className:"text-xs",children:a.project?.name||"Unknown Project"})})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsx)(m.Badge,{className:(0,x.cn)("text-xs",i[a.status]||"bg-gray-500/10 text-gray-500 border-gray-500/20"),children:a.status.replace("_"," ")}),e&&(0,b.jsxs)(m.Badge,{variant:"secondary",className:"text-xs",children:[(0,b.jsx)(E.Target,{className:"h-3 w-3 mr-1"}),"Today"]}),g&&g[a.id]&&(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(K,{forecast:g[a.id],dueDate:a.dueDate,compact:!0})})]})]}),(0,b.jsxs)(j.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Badge,{className:(0,x.cn)("text-xs",k[a.priority]||"bg-gray-500/10 text-gray-500 border-gray-500/20"),children:a.priority}),d&&(0,b.jsxs)(m.Badge,{variant:"destructive",className:"text-xs",children:[(0,b.jsx)(F.AlertCircle,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),a.assignees&&a.assignees.length>0?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex -space-x-2",children:a.assignees.slice(0,3).map(a=>(0,b.jsxs)(A.Avatar,{className:"h-6 w-6 border-2 border-background",children:[(0,b.jsx)(A.AvatarImage,{src:a.avatarUrl||void 0}),(0,b.jsx)(A.AvatarFallback,{className:"text-xs",children:a.username.substring(0,2).toUpperCase()})]},a.id))}),a.assignees.length>3&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["+",a.assignees.length-3]})]}):(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unassigned"}),a.dueDate&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,b.jsx)(C.Calendar,{className:"h-3 w-3"}),(0,b.jsxs)("span",{className:(0,x.cn)(d&&"text-red-600 font-medium"),children:["Due: ",(0,B.format)(new Date(a.dueDate),"MMM d, yyyy")]})]})]})]})},a.id)})}),h>1&&(0,b.jsx)(L.Pagination,{children:(0,b.jsxs)(L.PaginationContent,{children:[(0,b.jsx)(L.PaginationItem,{children:(0,b.jsx)(L.PaginationPrevious,{onClick:()=>d>1&&f(d-1),className:1===d?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:h},(a,b)=>b+1).map(a=>(0,b.jsx)(L.PaginationItem,{children:(0,b.jsx)(L.PaginationLink,{onClick:()=>f(a),isActive:a===d,className:"cursor-pointer",children:a})},a)),(0,b.jsx)(L.PaginationItem,{children:(0,b.jsx)(L.PaginationNext,{onClick:()=>d<h&&f(d+1),className:d===h?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})}var N=a.i(214719),O=a.i(19778),P=a.i(139353),Q=a.i(97186),D=D;function R({tasks:a,total:d,page:e,limit:f,onPageChange:g,forecasts:i}){let[j,k]=(0,c.useState)(null),[l,n]=(0,c.useState)("asc"),o=[...a].sort((a,b)=>{let c,d;if(!j)return 0;switch(j){case"title":c=a.title.toLowerCase(),d=b.title.toLowerCase();break;case"project":c=a.project?.name?.toLowerCase()||"",d=b.project?.name?.toLowerCase()||"";break;case"status":c=a.status,d=b.status;break;case"priority":let e={urgent:4,high:3,normal:2,low:1};c=e[a.priority]||0,d=e[b.priority]||0;break;case"dueDate":c=a.dueDate?new Date(a.dueDate).getTime():0,d=b.dueDate?new Date(b.dueDate).getTime():0;break;case"assignee":c=a.assignees?.[0]?.username?.toLowerCase()||"",d=b.assignees?.[0]?.username?.toLowerCase()||"";break;default:return 0}return c<d?"asc"===l?-1:1:c>d?"asc"===l?1:-1:0}),p=Math.ceil(d/f),q={pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",in_progress:"bg-blue-500/10 text-blue-500 border-blue-500/20",review:"bg-purple-500/10 text-purple-500 border-purple-500/20",completed:"bg-green-500/10 text-green-500 border-green-500/20",waiting:"bg-orange-500/10 text-orange-500 border-orange-500/20"},r={urgent:"bg-red-500/10 text-red-500 border-red-500/20",high:"bg-orange-500/10 text-orange-500 border-orange-500/20",normal:"bg-blue-500/10 text-blue-500 border-blue-500/20",low:"bg-gray-500/10 text-gray-500 border-gray-500/20"},s=(a,c)=>(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"h-8 data-[state=open]:bg-accent",onClick:()=>{j===a?n("asc"===l?"desc":"asc"):(k(a),n("asc"))},children:[c,j===a?"asc"===l?(0,b.jsx)(P.ArrowUp,{className:"ml-2 h-4 w-4"}):(0,b.jsx)(Q.ArrowDown,{className:"ml-2 h-4 w-4"}):(0,b.jsx)(O.ArrowUpDown,{className:"ml-2 h-4 w-4 opacity-50"})]});return 0===a.length?(0,b.jsxs)("div",{className:"flex min-h-[400px] flex-col items-center justify-center rounded-md border border-dashed p-8 text-center",children:[(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No tasks found"}),(0,b.jsx)("p",{className:"mb-4 mt-2 text-sm text-muted-foreground max-w-sm",children:"Try adjusting your filters or create a new task."})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(N.Table,{children:[(0,b.jsx)(N.TableHeader,{children:(0,b.jsxs)(N.TableRow,{children:[(0,b.jsx)(N.TableHead,{children:s("title","Task Name")}),(0,b.jsx)(N.TableHead,{children:s("project","Project")}),(0,b.jsx)(N.TableHead,{children:s("assignee","Assignee")}),(0,b.jsx)(N.TableHead,{children:s("status","Status")}),(0,b.jsx)(N.TableHead,{children:s("priority","Priority")}),(0,b.jsx)(N.TableHead,{children:s("dueDate","Due Date")}),(0,b.jsx)(N.TableHead,{children:"Dependencies"}),(0,b.jsx)(N.TableHead,{children:"Forecast"}),(0,b.jsx)(N.TableHead,{children:"Today Task"})]})}),(0,b.jsx)(N.TableBody,{children:o.map(a=>{let c="waiting"===a.status||!!a.dependencies&&a.dependencies.length>0&&a.dependencies.some(a=>"completed"!==a.dependsOnTask.status),d=!!a.dueDate&&new Date(a.dueDate)<new Date&&"completed"!==a.status,e=(a=>{if(!a.plannedDate)return!1;let b=new Date;b.setHours(0,0,0,0);let c=new Date(a.plannedDate);return c.setHours(0,0,0,0),c.getTime()===b.getTime()&&"completed"!==a.status})(a);return(0,b.jsxs)(N.TableRow,{className:(0,x.cn)("cursor-pointer hover:bg-muted/50",c&&"bg-orange-50/50",d&&"bg-red-50/50",e&&"bg-blue-50/50"),children:[(0,b.jsx)(N.TableCell,{children:(0,b.jsxs)(z.default,{href:`/dashboard/projects/${a.projectId}/tasks/${a.id}`,className:"font-medium hover:underline flex items-center gap-2",children:[a.title,c&&(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{children:(0,b.jsx)(D.default,{className:"h-4 w-4 text-orange-500"})}),(0,b.jsx)(J.TooltipContent,{children:(0,b.jsx)("p",{children:"Waiting on dependency"})})]})}),d&&(0,b.jsx)(F.AlertCircle,{className:"h-4 w-4 text-red-500"})]})}),(0,b.jsx)(N.TableCell,{children:(0,b.jsx)(m.Badge,{variant:"outline",className:"text-xs",children:a.project?.name||"Unknown"})}),(0,b.jsx)(N.TableCell,{children:a.assignees&&a.assignees.length>0?(0,b.jsx)("div",{className:"flex -space-x-2",children:a.assignees.slice(0,3).map(a=>(0,b.jsxs)(A.Avatar,{className:"h-6 w-6 border-2 border-background",children:[(0,b.jsx)(A.AvatarImage,{src:a.avatarUrl||void 0}),(0,b.jsx)(A.AvatarFallback,{className:"text-xs",children:a.username.substring(0,2).toUpperCase()})]},a.id))}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"—"})}),(0,b.jsx)(N.TableCell,{children:(0,b.jsx)(m.Badge,{className:(0,x.cn)("text-xs",q[a.status]||"bg-gray-500/10 text-gray-500 border-gray-500/20"),children:a.status.replace("_"," ")})}),(0,b.jsx)(N.TableCell,{children:(0,b.jsx)(m.Badge,{className:(0,x.cn)("text-xs",r[a.priority]||"bg-gray-500/10 text-gray-500 border-gray-500/20"),children:a.priority})}),(0,b.jsx)(N.TableCell,{children:a.dueDate?(0,b.jsx)("span",{className:(0,x.cn)("text-sm",d&&"text-red-600 font-medium"),children:(0,B.format)(new Date(a.dueDate),"MMM d, yyyy")}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,b.jsx)(N.TableCell,{children:c?(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{children:(0,b.jsx)(D.default,{className:"h-4 w-4 text-orange-500"})}),(0,b.jsx)(J.TooltipContent,{children:(0,b.jsx)("p",{children:"Blocked by dependency"})})]})}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,b.jsx)(N.TableCell,{children:i&&i[a.id]?(0,b.jsx)(K,{forecast:i[a.id],dueDate:a.dueDate,compact:!0}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,b.jsx)(N.TableCell,{children:e?(0,b.jsxs)(m.Badge,{variant:"secondary",className:"text-xs",children:[(0,b.jsx)(E.Target,{className:"h-3 w-3 mr-1"}),"Today"]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})})]},a.id)})})]})}),p>1&&(0,b.jsx)(L.Pagination,{children:(0,b.jsxs)(L.PaginationContent,{children:[(0,b.jsx)(L.PaginationItem,{children:(0,b.jsx)(L.PaginationPrevious,{onClick:()=>e>1&&g(e-1),className:1===e?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:p},(a,b)=>b+1).map(a=>(0,b.jsx)(L.PaginationItem,{children:(0,b.jsx)(L.PaginationLink,{onClick:()=>g(a),isActive:a===e,className:"cursor-pointer",children:a})},a)),(0,b.jsx)(L.PaginationItem,{children:(0,b.jsx)(L.PaginationNext,{onClick:()=>e<p&&g(e+1),className:e===p?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})}var S=a.i(210731),T=a.i(915084),T=T,U=a.i(731909),V=a.i(219754),V=V,W=a.i(422445),W=W,X=a.i(204451),Y=a.i(395301);let Z=(0,Y.createServerReference)("403db43b4fa87e3c4395d96062ae591067c02e1975",Y.callServer,void 0,Y.findSourceMapURL,"getTasksWithFilters"),$=(0,Y.createServerReference)("4092a06687f1e4d6d11b97639f194f16619a7c015f",Y.callServer,void 0,Y.findSourceMapURL,"getTaskStats");var _=a.i(335680);function aa({initialTasks:e,initialTotal:f,users:g,projects:h,currentUserId:j}){let k=(0,d.useRouter)(),l=(0,d.useSearchParams)(),[m,n]=(0,c.useTransition)(),[o,p]=(0,c.useState)(e),[q,r]=(0,c.useState)(f),[s,t]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(l.get("view")||"card"),[E,H]=(0,c.useState)({}),I=(0,c.useMemo)(()=>0===o.length?"":o.map(a=>a.id).sort().join(","),[o]);(0,c.useEffect)(()=>{I&&(async()=>{let{getForecastsForTasks:b}=await a.A(623024),c=o.map(a=>a.id),d=await b(c);d.success&&d.data&&H(a=>({...a,...d.data}))})()},[I,o]);let[J,K]=(0,c.useState)(l.get("search")||""),[L,N]=(0,c.useState)(l.get("project")?.split(",").filter(Boolean)||[]),[O,P]=(0,c.useState)(l.get("status")?.split(",").filter(Boolean)||[]),[Q,Y]=(0,c.useState)(l.get("priority")?.split(",").filter(Boolean)||[]),[aa,ab]=(0,c.useState)(l.get("assignee")||"all"),[ac,ad]=(0,c.useState)(l.get("dependencyState")||"all"),[ae,af]=(0,c.useState)({start:l.get("startDate")?new Date(l.get("startDate")):void 0,end:l.get("endDate")?new Date(l.get("endDate")):void 0}),[ag,ah]=(0,c.useState)(l.get("dateFilterType")||"dueDate"),[ai,aj]=(0,c.useState)(parseInt(l.get("page")||"1")),[ak]=(0,c.useState)(20);(0,c.useCallback)(()=>{let a=new URLSearchParams;J&&a.set("search",J),L.length>0&&a.set("project",L.join(",")),O.length>0&&a.set("status",O.join(",")),Q.length>0&&a.set("priority",Q.join(",")),"all"!==aa&&a.set("assignee",aa),"all"!==ac&&a.set("dependencyState",ac),ae.start&&a.set("startDate",ae.start.toISOString().split("T")[0]),ae.end&&a.set("endDate",ae.end.toISOString().split("T")[0]),"dueDate"!==ag&&a.set("dateFilterType",ag),"card"!==C&&a.set("view",C),ai>1&&a.set("page",ai.toString()),n(()=>{k.push(`/dashboard/tasks?${a.toString()}`,{scroll:!1})})},[J,L,O,Q,aa,ac,ae,ag,C,ai,k]),(0,c.useCallback)(()=>({search:J,projectId:L.length>0?L:void 0,statusId:O.length>0?O:void 0,status:O.length>0?O:void 0,priority:Q.length>0?Q:void 0,assigneeId:"all"!==aa?aa:void 0,dependencyState:"all"!==ac?ac:void 0,startDate:ae.start?.toISOString(),endDate:ae.end?.toISOString(),dateRange:ae.start&&ae.end?{from:ae.start,to:ae.end}:void 0,dateFilterType:ag,page:ai,limit:ak}),[J,L,O,Q,aa,ac,ae,ag,ai,ak]),(0,c.useEffect)(()=>{let a=setTimeout(async()=>{t(!0),z(!0);try{let[a,b]=await Promise.all([Z({search:J,projectId:L.length>0?L:void 0,status:O.length>0?O:void 0,priority:Q.length>0?Q:void 0,assigneeId:"all"!==aa?aa:void 0,dependencyState:"all"!==ac?ac:void 0,startDate:ae.start?.toISOString(),endDate:ae.end?.toISOString(),dateFilterType:ag,page:ai,limit:ak}),$({search:J,projectId:L.length>0?L:void 0,statusId:O.length>0?O:void 0,priority:Q.length>0?Q:void 0,assigneeId:"all"!==aa?aa:void 0,dateRange:ae.start&&ae.end?{from:ae.start,to:ae.end}:void 0})]);a.success?(p(a.tasks||[]),r(a.total||0)):B(a.error||"Failed to load tasks"),b.success&&b.data&&w(b.data)}catch(a){B(a.message||"An error occurred")}finally{t(!1),z(!1)}},400*(J!==(l.get("search")||"")&&""!==J));return()=>clearTimeout(a)},[J,L,O,Q,aa,ac,ae,ag,ai,ak]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{let a=new URLSearchParams;J&&a.set("search",J),L.length>0&&a.set("project",L.join(",")),O.length>0&&a.set("status",O.join(",")),Q.length>0&&a.set("priority",Q.join(",")),"all"!==aa&&a.set("assignee",aa),"all"!==ac&&a.set("dependencyState",ac),ae.start&&a.set("startDate",ae.start.toISOString().split("T")[0]),ae.end&&a.set("endDate",ae.end.toISOString().split("T")[0]),"dueDate"!==ag&&a.set("dateFilterType",ag),"card"!==C&&a.set("view",C),ai>1&&a.set("page",ai.toString()),n(()=>{k.push(`/dashboard/tasks?${a.toString()}`,{scroll:!1})})},100);return()=>clearTimeout(a)},[J,L,O,Q,aa,ac,ae,ag,C,ai,k]);let al=()=>{K(""),N([]),P([]),Y([]),ab("all"),ad("all"),af({}),ah("dueDate"),aj(1)},am=v?[{label:"Total Tasks",value:v.totalTasks,icon:(0,b.jsx)(T.default,{}),color:"default",onClick:al},{label:"My Tasks",value:v.myTasks,icon:(0,b.jsx)(U.User,{}),color:"blue",onClick:()=>ab(j.toString())},{label:"Today's Focus",value:v.todayTasks,icon:(0,b.jsx)(V.default,{}),color:"green",onClick:()=>{let a=new Date,b=new Date(a);b.setDate(b.getDate()+1),af({start:a,end:b}),ah("dueDate")}},{label:"Blocked",value:v.blockedTasks,icon:(0,b.jsx)(W.default,{}),color:v.blockedTasks>0?"red":"default",onClick:()=>ad("blocked")},{label:"Overdue",value:v.overdueTasks,icon:(0,b.jsx)(F.AlertCircle,{}),color:v.overdueTasks>0?"orange":"default",onClick:()=>{af({start:void 0,end:new Date}),ah("dueDate")}},{label:"Completed Today",value:v.completedToday,icon:(0,b.jsx)(G.CheckCircle2,{}),color:"default",onClick:()=>{let a=new Date,b=new Date(a);b.setDate(b.getDate()+1),af({start:a,end:b}),P(["completed"])}}]:[];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"All Tasks"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View and manage tasks across all projects"})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)(y,{viewMode:C,onViewChange:a=>{D(a)}})})]}),(0,b.jsx)(_.SummaryStatsCards,{cards:am,isLoading:x}),(0,b.jsx)(i,{value:J,onChange:K,onClear:()=>{K(""),al()}}),(0,b.jsx)(u,{projectFilter:L,onProjectChange:N,statusFilter:O,onStatusChange:P,priorityFilter:Q,onPriorityChange:Y,assigneeFilter:aa,onAssigneeChange:ab,dependencyState:ac,onDependencyStateChange:ad,dateRange:ae,onDateRangeChange:af,dateFilterType:ag,onDateFilterTypeChange:ah,projects:h,users:g,currentUserId:j,onClear:al}),A&&(0,b.jsxs)(X.Alert,{variant:"destructive",children:[(0,b.jsx)(F.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(X.AlertDescription,{children:A})]}),(0,b.jsx)("div",{className:s&&o.length>0?"opacity-50 pointer-events-none transition-opacity":"opacity-100 transition-opacity",children:0!==o.length||s?o.length>0?(0,b.jsx)(b.Fragment,{children:"card"===C?(0,b.jsx)(M,{tasks:o,total:q,page:ai,limit:ak,onPageChange:aj,forecasts:E}):(0,b.jsx)(R,{tasks:o,total:q,page:ai,limit:ak,onPageChange:aj,forecasts:E})}):(0,b.jsx)("div",{className:"space-y-4",children:[...Array(6)].map((a,c)=>(0,b.jsx)("div",{className:"h-24 bg-muted/50 rounded-lg animate-pulse"},c))}):(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No tasks found. Try adjusting your filters."})})}),s&&o.length>0&&(0,b.jsxs)("div",{className:"fixed bottom-6 right-6 flex items-center gap-2 bg-background border border-border rounded-lg px-4 py-2 shadow-lg z-50",children:[(0,b.jsx)(S.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Updating..."})]})]})}a.s(["TasksDashboard",()=>aa],854895)}];

//# sourceMappingURL=36f85_Project_Management_NXT_src_components_tasks_tasks-dashboard_tsx_0bac9de4._.js.map