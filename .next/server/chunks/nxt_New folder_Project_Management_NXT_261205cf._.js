module.exports=[941908,(e,r,t)=>{"use strict";r.exports=e.r(329724).vendored["react-rsc"].ReactServerDOMTurbopackServer},33784,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"registerServerReference",{enumerable:!0,get:function(){return o.registerServerReference}});let o=e.r(941908)},252226,(e,r,t)=>{"use strict";function o(e){for(let r=0;r<e.length;r++){let t=e[r];if("function"!=typeof t)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof t}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureServerEntryExports",{enumerable:!0,get:function(){return o}})},205013,e=>{"use strict";var r=e.i(33784),t=e.i(665592),o=e.i(779957);async function i(e){console.log("[ActivityLogger] ====== START LOGGING ======"),console.log("[ActivityLogger] Received params:",JSON.stringify(e,null,2));try{let r=function e(r){let t={...r};for(let e of["password","passwordHash","password_hash","token","secret","apiKey","api_key","accessToken","refreshToken"])e in t&&(t[e]="[REDACTED]");for(let r in t)"object"!=typeof t[r]||null===t[r]||Array.isArray(t[r])||(t[r]=e(t[r]));return t}(e.actionDetails||{});console.log("[ActivityLogger] Sanitized details:",JSON.stringify(r,null,2)),console.log("[ActivityLogger] Logging activity:",{actionType:e.actionType,actionCategory:e.actionCategory,actionSummary:e.actionSummary,performedById:e.performedById});try{let o=await t.prisma.activityLog.create({data:{actionType:e.actionType,actionCategory:e.actionCategory,actionSummary:e.actionSummary,actionDetails:Object.keys(r).length>0?JSON.stringify(r):null,performedById:e.performedById,affectedUserId:e.affectedUserId||null,projectId:e.projectId||null,entityType:e.entityType||null,entityId:e.entityId||null,ipAddress:e.ipAddress||await n(),userAgent:e.userAgent||await c(),action:e.actionType,description:e.actionSummary,userId:e.performedById}});console.log("[ActivityLogger] ✅ Successfully logged activity with ID:",o.id),console.log("[ActivityLogger] ====== END LOGGING (SUCCESS) ======");return}catch(r){if(console.error("[ActivityLogger] ❌ Schema error occurred:"),console.error("[ActivityLogger] Error message:",r.message),console.error("[ActivityLogger] Error code:",r.code),console.error("[ActivityLogger] Error meta:",JSON.stringify(r.meta,null,2)),r.message?.includes("no such column")||"P2003"===r.code||"P2011"===r.code){console.warn("[ActivityLogger] New columns not found, using legacy schema. Please run migration."),await t.prisma.$executeRawUnsafe(`
          INSERT INTO activity_logs (action, description, entity_type, entity_id, ip_address, user_id, created_at)
          VALUES (?, ?, ?, ?, ?, ?, datetime('now'))
        `,e.actionType,e.actionSummary,e.entityType||null,e.entityId||null,e.ipAddress||await n()||null,e.performedById),console.log("[ActivityLogger] ✅ Logged using legacy schema"),console.log("[ActivityLogger] ====== END LOGGING (LEGACY) ======");return}throw console.error("[ActivityLogger] ❌ Unknown schema error, rethrowing"),r}}catch(e){console.error("[ActivityLogger] ❌❌❌ CRITICAL ERROR - Failed to log activity ❌❌❌"),console.error("[ActivityLogger] Error message:",e?.message||e),console.error("[ActivityLogger] Error code:",e?.code),console.error("[ActivityLogger] Error meta:",JSON.stringify(e?.meta,null,2)),console.error("[ActivityLogger] Error stack:",e?.stack),console.error("[ActivityLogger] ====== END LOGGING (ERROR) ======")}}async function n(){try{let e=await (0,o.headers)(),r=e.get("x-forwarded-for"),t=e.get("x-real-ip");if(r)return r.split(",")[0].trim();if(t)return t;return null}catch{return null}}async function c(){try{return(await (0,o.headers)()).get("user-agent")||null}catch{return null}}(0,e.i(252226).ensureServerEntryExports)([i]),(0,r.registerServerReference)(i,"40daa1d9c7314de4957a7669434db12aaa24630ba4",null),e.s(["logActivity",()=>i])}];

//# sourceMappingURL=nxt_New%20folder_Project_Management_NXT_261205cf._.js.map