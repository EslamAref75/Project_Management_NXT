(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,613627,e=>{"use strict";var s=e.i(696009),a=e.i(181340),t=e.i(956569),i=e.i(813606),r=e.i(594652),l=e.i(745999);let n=(0,l.createServerReference)("4014896b5d2affbb03c83dbddeb66e1724203ab137",l.callServer,void 0,l.findSourceMapURL,"updateProfile");var c=e.i(776574),d=e.i(512845);function o({user:e}){let{update:l}=(0,d.useSession)(),[o,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)("");async function x(e){e.preventDefault(),u(!0),m("");let s=new FormData(e.currentTarget),a=await n(s);u(!1),a?.success?(m("Profile updated successfully!"),l({name:s.get("username")})):m(a?.error||"Failed to update profile")}return(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4 max-w-md",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(r.Label,{htmlFor:"username",children:"Username"}),(0,s.jsx)(i.Input,{id:"username",name:"username",defaultValue:e.username,required:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(r.Label,{htmlFor:"email",children:"Email"}),(0,s.jsx)(i.Input,{id:"email",name:"email",type:"email",defaultValue:e.email,required:!0})]}),(0,s.jsxs)(t.Button,{type:"submit",disabled:o,children:[o&&(0,s.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Profile"]}),h&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:h})]})}e.s(["ProfileForm",()=>o],613627)},188943,e=>{"use strict";var s=e.i(696009),a=e.i(181340),t=e.i(956569),i=e.i(813606),r=e.i(594652),l=e.i(745999);let n=(0,l.createServerReference)("4030a94bd5b3ca5815ae2cd1d1725e523f9f88fa17",l.callServer,void 0,l.findSourceMapURL,"changePassword");var c=e.i(776574);function d(){let[e,l]=(0,a.useState)(!1),[d,o]=(0,a.useState)("");async function u(e){e.preventDefault(),l(!0),o("");let s=new FormData(e.currentTarget),a=await n(s);if(l(!1),a&&"success"in a&&a.success){o("Password changed successfully!");let s=e.currentTarget;s&&s.reset()}else o(a?.error||"Failed to change password")}return(0,s.jsxs)("form",{onSubmit:u,className:"space-y-4 max-w-md",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(r.Label,{htmlFor:"currentPassword",children:"Current Password"}),(0,s.jsx)(i.Input,{id:"currentPassword",name:"currentPassword",type:"password",required:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(r.Label,{htmlFor:"newPassword",children:"New Password"}),(0,s.jsx)(i.Input,{id:"newPassword",name:"newPassword",type:"password",required:!0,minLength:6})]}),(0,s.jsxs)(t.Button,{type:"submit",disabled:e,children:[e&&(0,s.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Change Password"]}),d&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:d})]})}e.s(["PasswordForm",()=>d],188943)},597261,e=>{"use strict";var s=e.i(696009),a=e.i(181340),t=e.i(956569),i=e.i(745999);let r=(0,i.createServerReference)("00a7551eb825197a762c03325de2ebb2525343d67a",i.callServer,void 0,i.findSourceMapURL,"initializeRBAC");var l=e.i(776574),n=e.i(27772),n=n,c=e.i(479093),d=e.i(238016);function o(){let[e,i]=(0,a.useState)(!1),[o,u]=(0,a.useState)(null),h=(0,c.useRouter)();async function m(){i(!0),u(null);try{let e=await r();e.success?(u({type:"success",text:"RBAC system initialized successfully! Default roles and permissions have been created."}),setTimeout(()=>{h.refresh()},1500)):u({type:"error",text:e.error||"Failed to initialize RBAC system"})}catch(e){u({type:"error",text:e.message||"An error occurred while initializing RBAC"})}finally{i(!1)}}return(0,s.jsxs)(d.AlertDialog,{children:[(0,s.jsx)(d.AlertDialogTrigger,{asChild:!0,children:(0,s.jsxs)(t.Button,{variant:"outline",disabled:e,children:[(0,s.jsx)(n.default,{className:"h-4 w-4 mr-2"}),e?"Initializing...":"Initialize RBAC System"]})}),(0,s.jsxs)(d.AlertDialogContent,{children:[(0,s.jsxs)(d.AlertDialogHeader,{children:[(0,s.jsx)(d.AlertDialogTitle,{children:"Initialize RBAC System"}),(0,s.jsx)(d.AlertDialogDescription,{children:"This will create default roles (System Admin, Project Manager, Team Lead, Developer) and all required permissions in the database. Existing roles not in this list will be removed (if no users are assigned). This action is safe to run multiple times and will update roles and permissions as needed."})]}),o&&(0,s.jsx)("div",{className:`p-3 rounded-md ${"success"===o.type?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:o.text}),(0,s.jsxs)(d.AlertDialogFooter,{children:[(0,s.jsx)(d.AlertDialogCancel,{disabled:e,children:"Cancel"}),(0,s.jsxs)(d.AlertDialogAction,{onClick:m,disabled:e,className:"bg-primary text-primary-foreground",children:[e&&(0,s.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Initialize"]})]})]})]})}e.s(["RBACInitializeButton",()=>o],597261)},525436,e=>{"use strict";var s=e.i(696009),a=e.i(181340),t=e.i(512581),i=e.i(304077),r=e.i(956569),l=e.i(594652),n=e.i(813606),c=e.i(870609),d=e.i(936358),o=e.i(745999);let u=(0,o.createServerReference)("7834670bad8c75d0bafc47394918473dedf1ef1d03",o.callServer,void 0,o.findSourceMapURL,"updateUserSetting"),h=(0,o.createServerReference)("6076a771c1b69db27eefc144c7f346084707e44c83",o.callServer,void 0,o.findSourceMapURL,"resetUserSetting");var m=e.i(776574),x=e.i(529082),j=e.i(315131),g=e.i(362987),p=e.i(479093);function f({userId:e,userSettings:i,resolvedSettings:r}){let[l,n]=(0,a.useState)("preferences"),[c,d]=(0,a.useTransition)(),{toast:o}=(0,g.useToast)(),m=(0,p.useRouter)(),x=async(s,a)=>{d(async()=>{let t=await u(e,s,a);t.success?(o({title:"Success",description:"Settings saved successfully"}),m.refresh()):o({title:"Error",description:t.error||"Failed to save settings",variant:"destructive"})})},j=async s=>{d(async()=>{let a=await h(e,s);a.success?(o({title:"Success",description:"Settings reset to default"}),m.refresh()):o({title:"Error",description:a.error||"Failed to reset settings",variant:"destructive"})})},f=e=>{let s=i[e];return s&&0!==s.length&&(s.find(s=>s.key===e)||s[0])||null},w=e=>{let s=r[e];return s&&s.value||null};return(0,s.jsxs)(t.Tabs,{value:l,onValueChange:n,className:"space-y-6",children:[(0,s.jsxs)(t.TabsList,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(t.TabsTrigger,{value:"preferences",children:"Personal"}),(0,s.jsx)(t.TabsTrigger,{value:"todayTasks",children:"Today's Tasks"}),(0,s.jsx)(t.TabsTrigger,{value:"notifications",children:"Notifications"}),(0,s.jsx)(t.TabsTrigger,{value:"workflow",children:"Workflow"})]}),(0,s.jsx)(t.TabsContent,{value:"preferences",children:(0,s.jsx)(v,{userId:e,setting:f("preferences"),resolvedValue:w("preferences"),onSave:x,onReset:j,isPending:c})}),(0,s.jsx)(t.TabsContent,{value:"todayTasks",children:(0,s.jsx)(y,{userId:e,setting:f("todayTasks"),resolvedValue:w("todayTasks"),onSave:x,onReset:j,isPending:c})}),(0,s.jsx)(t.TabsContent,{value:"notifications",children:(0,s.jsx)(S,{userId:e,setting:f("notifications"),resolvedValue:w("notifications"),onSave:x,onReset:j,isPending:c})}),(0,s.jsx)(t.TabsContent,{value:"workflow",children:(0,s.jsx)(b,{userId:e,setting:f("workflow"),resolvedValue:w("workflow"),onSave:x,onReset:j,isPending:c})})]})}function v({userId:e,setting:t,resolvedValue:c,onSave:o,onReset:u,isPending:h}){let[g,p]=(0,a.useState)(t?.value?.timezone||c?.timezone||"Africa/Cairo"),[f,v]=(0,a.useState)(t?.value?.workingHours||c?.workingHours||{start:"09:00",end:"17:00"});return(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"Personal Preferences"}),(0,s.jsx)(i.CardDescription,{children:"Configure your timezone and working hours"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Display Timezone"}),(0,s.jsxs)(d.Select,{value:g,onValueChange:p,children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"Africa/Cairo",children:"Cairo, Egypt (GMT+2)"}),(0,s.jsx)(d.SelectItem,{value:"UTC",children:"UTC"}),(0,s.jsx)(d.SelectItem,{value:"America/New_York",children:"America/New_York"}),(0,s.jsx)(d.SelectItem,{value:"America/Los_Angeles",children:"America/Los_Angeles"}),(0,s.jsx)(d.SelectItem,{value:"Europe/London",children:"Europe/London"}),(0,s.jsx)(d.SelectItem,{value:"Asia/Dubai",children:"Asia/Dubai"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"This only affects how dates/times are displayed to you"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Start Time"}),(0,s.jsx)(n.Input,{type:"time",value:f.start,onChange:e=>v({...f,start:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"End Time"}),(0,s.jsx)(n.Input,{type:"time",value:f.end,onChange:e=>v({...f,end:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{onClick:()=>{o("preferences",{timezone:g,workingHours:f})},disabled:h,children:[h&&(0,s.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)(x.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t&&(0,s.jsxs)(r.Button,{variant:"outline",onClick:()=>u("preferences"),disabled:h,children:[(0,s.jsx)(j.RotateCcw,{className:"mr-2 h-4 w-4"}),"Reset to Default"]})]})]})]})}function y({userId:e,setting:t,resolvedValue:n,onSave:o,onReset:u,isPending:h}){let[g,p]=(0,a.useState)(t?.value?.autoOpenOnLogin??n?.autoOpenOnLogin??!1),[f,v]=(0,a.useState)(t?.value?.defaultView||n?.defaultView||"compact"),[y,S]=(0,a.useState)(t?.value?.highlightBlocked??n?.highlightBlocked??!0),[b,w]=(0,a.useState)(t?.value?.showDependencyDetails??n?.showDependencyDetails??!1);return(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"Today's Tasks Display"}),(0,s.jsx)(i.CardDescription,{children:"Configure how Today's Tasks are displayed"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"Auto-Open Today's Tasks on Login"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically navigate to Today's Focus after login"})]}),(0,s.jsx)(c.Switch,{checked:g,onCheckedChange:p})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Default View"}),(0,s.jsxs)(d.Select,{value:f,onValueChange:v,children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"compact",children:"Compact"}),(0,s.jsx)(d.SelectItem,{value:"detailed",children:"Detailed"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"Highlight Blocked Tasks"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Apply visual emphasis to blocked tasks"})]}),(0,s.jsx)(c.Switch,{checked:y,onCheckedChange:S})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"Show Dependency Details Inline"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show prerequisite task information in task cards"})]}),(0,s.jsx)(c.Switch,{checked:b,onCheckedChange:w})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{onClick:()=>{o("todayTasks",{autoOpenOnLogin:g,defaultView:f,highlightBlocked:y,showDependencyDetails:b})},disabled:h,children:[h&&(0,s.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)(x.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t&&(0,s.jsxs)(r.Button,{variant:"outline",onClick:()=>u("todayTasks"),disabled:h,children:[(0,s.jsx)(j.RotateCcw,{className:"mr-2 h-4 w-4"}),"Reset to Default"]})]})]})]})}function S({userId:e,setting:t,resolvedValue:n,onSave:o,onReset:u,isPending:h}){let[g,p]=(0,a.useState)(t?.value?.channels||n?.channels||{inApp:!0,email:!0}),[f,v]=(0,a.useState)(t?.value?.grouping||n?.grouping||"realtime"),[y,S]=(0,a.useState)(t?.value?.priorityFilter||n?.priorityFilter||["low","normal","high","urgent"]),[b,w]=(0,a.useState)(t?.value?.soundEnabled??n?.soundEnabled??!0);return(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"Notification Preferences"}),(0,s.jsx)(i.CardDescription,{children:"Configure how you receive notifications"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(l.Label,{children:"Notification Channels"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"In-App Notifications"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Critical notifications always enabled"})]}),(0,s.jsx)(c.Switch,{checked:g.inApp,onCheckedChange:e=>p({...g,inApp:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"space-y-0.5",children:(0,s.jsx)(l.Label,{children:"Email Notifications"})}),(0,s.jsx)(c.Switch,{checked:g.email,onCheckedChange:e=>p({...g,email:e})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Notification Grouping"}),(0,s.jsxs)(d.Select,{value:f,onValueChange:v,children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"realtime",children:"Real-time"}),(0,s.jsx)(d.SelectItem,{value:"dailyDigest",children:"Daily Digest"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Critical notifications are always real-time"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"Notification Sound"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Play sound when notifications arrive"})]}),(0,s.jsx)(c.Switch,{checked:b,onCheckedChange:w})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Priority Filter"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["low","normal","high","urgent"].map(e=>(0,s.jsx)(r.Button,{variant:y.includes(e)?"default":"outline",size:"sm",onClick:()=>{"high"!==e&&"urgent"!==e&&(y.includes(e)?S(y.filter(s=>s!==e)):S([...y,e].sort()))},disabled:"high"===e||"urgent"===e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"High and Urgent priority notifications cannot be disabled"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{onClick:()=>{o("notifications",{channels:g,grouping:f,priorityFilter:y,soundEnabled:b})},disabled:h,children:[h&&(0,s.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)(x.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t&&(0,s.jsxs)(r.Button,{variant:"outline",onClick:()=>u("notifications"),disabled:h,children:[(0,s.jsx)(j.RotateCcw,{className:"mr-2 h-4 w-4"}),"Reset to Default"]})]})]})]})}function b({userId:e,setting:t,resolvedValue:n,onSave:o,onReset:u,isPending:h}){let[g,p]=(0,a.useState)(t?.value?.defaultLandingPage||n?.defaultLandingPage||"dashboard"),[f,v]=(0,a.useState)(t?.value?.defaultProjectContext||n?.defaultProjectContext||null),[y,S]=(0,a.useState)(t?.value?.standupSummaryDisplay||n?.standupSummaryDisplay||{enabled:!1,format:"compact"});return(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"Daily Workflow Preferences"}),(0,s.jsx)(i.CardDescription,{children:"Configure your default workflow and landing page"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Default Landing Page"}),(0,s.jsxs)(d.Select,{value:g,onValueChange:p,children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"dashboard",children:"Dashboard"}),(0,s.jsx)(d.SelectItem,{value:"todayFocus",children:"Today's Focus"}),(0,s.jsx)(d.SelectItem,{value:"projects",children:"Projects"}),(0,s.jsx)(d.SelectItem,{value:"tasks",children:"Tasks"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Default Project Context"}),(0,s.jsxs)(d.Select,{value:f?f.toString():"all",onValueChange:e=>v("all"===e?null:parseInt(e)),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"All Projects"})}),(0,s.jsx)(d.SelectContent,{children:(0,s.jsx)(d.SelectItem,{value:"all",children:"All Projects"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pre-select a project context for task creation"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"Show Stand-up Summary"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Display daily stand-up summary widget"})]}),(0,s.jsx)(c.Switch,{checked:y.enabled,onCheckedChange:e=>S({...y,enabled:e})})]}),y.enabled&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"Summary Format"}),(0,s.jsxs)(d.Select,{value:y.format,onValueChange:e=>S({...y,format:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"compact",children:"Compact"}),(0,s.jsx)(d.SelectItem,{value:"detailed",children:"Detailed"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{onClick:()=>{o("workflow",{defaultLandingPage:g,defaultProjectContext:f||null,standupSummaryDisplay:y})},disabled:h,children:[h&&(0,s.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)(x.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t&&(0,s.jsxs)(r.Button,{variant:"outline",onClick:()=>u("workflow"),disabled:h,children:[(0,s.jsx)(j.RotateCcw,{className:"mr-2 h-4 w-4"}),"Reset to Default"]})]})]})]})}e.s(["UserSettingsPanel",()=>f],525436)},81693,e=>{"use strict";var s=e.i(696009),a=e.i(181340),t=e.i(905615),i=e.i(956569),r=e.i(813606),l=e.i(594652),n=e.i(870609),c=e.i(304077),d=e.i(745999);let o=(0,d.createServerReference)("7856a9cd98bf3a731a97f71b1b70c5ad4d859adbb2",d.callServer,void 0,d.findSourceMapURL,"updateSetting"),u=(0,d.createServerReference)("40dcf4e685022ac015152cc50e6096832ab9a723be",d.callServer,void 0,d.findSourceMapURL,"uploadSystemLogo");var h=e.i(776574),m=e.i(646965),x=e.i(529082),j=e.i(799038),g=e.i(108884);function p(){let{settings:e,refreshSettings:d}=(0,t.useSystemSettings)(),[p,f]=(0,a.useState)(e.systemName),[v,y]=(0,a.useState)(e.systemLogo),[S,b]=(0,a.useState)(e.allowRegistration),[w,C]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),[T,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{f(e.systemName),y(e.systemLogo),b(e.allowRegistration)},[e]);let D=async()=>{k(!0),L(null);try{let s=e.systemLogo;if(w){let e=new FormData;e.append("file",w);let a=await u(e);if(a.error)throw Error(a.error);a.url&&(s=a.url)}let a=await o("general",{...e,systemName:p,systemLogo:s,allowRegistration:S},"Updated branding settings","general");if(a.error)throw Error(a.error);await d(),L({type:"success",text:"Branding settings updated successfully"}),C(null),window.location.reload()}catch(e){L({type:"error",text:e.message||"Failed to update settings"})}finally{k(!1)}};return(0,s.jsxs)(c.Card,{children:[(0,s.jsxs)(c.CardHeader,{children:[(0,s.jsx)(c.CardTitle,{children:"System Branding"}),(0,s.jsx)(c.CardDescription,{children:"Customize the look and feel of your application."})]}),(0,s.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{htmlFor:"system-name",children:"System Name"}),(0,s.jsx)(r.Input,{id:"system-name",value:p,onChange:e=>f(e.target.value),placeholder:"e.g. Acme Corp PMS"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{children:"System Logo"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 border p-4 rounded-lg bg-gray-50/50",children:[(0,s.jsx)("div",{className:"relative h-16 w-16 bg-white rounded-md border flex items-center justify-center overflow-hidden",children:v?(0,s.jsx)(g.default,{src:v,alt:"Logo preview",fill:!0,className:"object-contain p-1"}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"No logo"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(l.Label,{htmlFor:"logo-upload",className:"cursor-pointer inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2",children:[(0,s.jsx)(m.Upload,{className:"h-4 w-4 mr-2"}),"Choose Image"]}),(0,s.jsx)(r.Input,{id:"logo-upload",type:"file",accept:"image/png, image/jpeg, image/svg+xml",className:"hidden",onChange:e=>{let s=e.target.files?.[0];if(s){if(s.size>2097152)return void L({type:"error",text:"File size must be less than 2MB"});C(s);let e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(s),L(null)}}}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:w?w.name:"No file chosen"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recommended: PNG or SVG, max 2MB."})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(l.Label,{children:"Public Registration"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow users to sign up for an account publicly."})]}),(0,s.jsx)(n.Switch,{checked:S,onCheckedChange:b})]}),T&&(0,s.jsxs)("div",{className:`p-3 rounded-md text-sm flex items-center gap-2 ${"success"===T.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:["success"===T.type&&(0,s.jsx)(j.CheckCircle2,{className:"h-4 w-4"}),T.text]})]}),(0,s.jsx)(c.CardFooter,{children:(0,s.jsxs)(i.Button,{onClick:D,disabled:N,children:[N&&(0,s.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),!N&&(0,s.jsx)(x.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})}e.s(["BrandingSettingsPanel",()=>p],81693)}]);