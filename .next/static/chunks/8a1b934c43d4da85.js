(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,813606,e=>{"use strict";var t=e.i(696009),s=e.i(91622);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},362987,e=>{"use strict";var t=e.i(181340);function s(){let[e,s]=(0,t.useState)([]);return{toast:function({title:e,description:t,variant:s}){console.log("Toast:",e,t,s)},toasts:e}}e.s(["useToast",()=>s])},486718,e=>{"use strict";let t=(0,e.i(751084).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["default",()=>t])},315811,e=>{"use strict";var t=e.i(486718);e.s(["Filter",()=>t.default])},70687,e=>{"use strict";let t=(0,e.i(751084).default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);e.s(["default",()=>t])},617782,e=>{"use strict";var t=e.i(745999);let s=(0,t.createServerReference)("60e11d18f808d2843f4d06a35ea4ad9027dd8b4de1",t.callServer,void 0,t.findSourceMapURL,"getProjectNotifications");e.s(["getProjectNotifications",()=>s])},683142,e=>{"use strict";var t=e.i(745999);let s=(0,t.createServerReference)("40c086aae8b4c1ddec14829c213410ee4c5d2ec0b4",t.callServer,void 0,t.findSourceMapURL,"markAllProjectNotificationsAsRead");e.s(["markAllProjectNotificationsAsRead",()=>s])},115065,e=>{"use strict";var t=e.i(696009),s=e.i(181340),a=e.i(304077),i=e.i(956569),r=e.i(35490),l=e.i(936358),c=e.i(813606),d=e.i(617782),n=e.i(884145),o=e.i(683142),u=e.i(438967),m=e.i(70687),m=m,x=e.i(604208),h=e.i(315811),f=e.i(479093),j=e.i(924130),p=e.i(362987);function g({projectId:e}){let[g,v]=(0,s.useState)([]),[b,N]=(0,s.useState)(0),[y,S]=(0,s.useState)(!0),[k,C]=(0,s.useState)(1),[R,w]=(0,s.useState)({type:"all",isRead:"all",search:""}),A=(0,f.useRouter)(),{toast:T}=(0,p.useToast)(),P=async()=>{S(!0);let t=await (0,d.getProjectNotifications)(e,{type:"all"!==R.type?R.type:void 0,isRead:"all"===R.isRead?void 0:"read"===R.isRead,limit:20,offset:(k-1)*20});if(t.success&&t.notifications){let e=t.notifications;if(R.search){let t=R.search.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.message.toLowerCase().includes(t))}v(e),N(t.total||0)}S(!1)};(0,s.useEffect)(()=>{P()},[k,R]);let I=async t=>{(await (0,n.markProjectNotificationAsRead)(e,t)).success&&(v(e=>e.map(e=>e.id===t?{...e,isRead:!0}:e)),A.refresh(),T({title:"Success",description:"Notification marked as read"}))},B=async()=>{(await (0,o.markAllProjectNotificationsAsRead)(e)).success&&(v(e=>e.map(e=>({...e,isRead:!0}))),A.refresh(),T({title:"Success",description:"All notifications marked as read"}))},L=Math.ceil(b/20);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Filter,{className:"h-5 w-5"}),"Filters"]})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),(0,t.jsxs)(l.Select,{value:R.type,onValueChange:e=>{w({...R,type:e}),C(1)},children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"all",children:"All Types"}),(0,t.jsx)(l.SelectItem,{value:"task",children:"Task"}),(0,t.jsx)(l.SelectItem,{value:"dependency",children:"Dependency"}),(0,t.jsx)(l.SelectItem,{value:"today_task",children:"Today's Task"}),(0,t.jsx)(l.SelectItem,{value:"project_admin",children:"Project Admin"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,t.jsxs)(l.Select,{value:R.isRead,onValueChange:e=>{w({...R,isRead:e}),C(1)},children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(l.SelectItem,{value:"unread",children:"Unread"}),(0,t.jsx)(l.SelectItem,{value:"read",children:"Read"})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),(0,t.jsx)(c.Input,{placeholder:"Search notifications...",value:R.search,onChange:e=>{w({...R,search:e.target.value}),C(1)}})]})]}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsxs)(i.Button,{onClick:B,variant:"outline",children:[(0,t.jsx)(m.default,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{children:["Notifications (",b,")"]})}),(0,t.jsxs)(a.CardContent,{children:[y?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):0===g.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No notifications found"}):(0,t.jsx)("div",{className:"space-y-4",children:g.map(s=>(0,t.jsx)("div",{className:`p-4 border rounded-lg hover:bg-muted/50 transition-colors ${!s.isRead?"bg-blue-50/50 border-blue-200":""}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(r.Badge,{variant:"outline",className:`text-xs ${(e=>{switch(e){case"task":return"bg-blue-100 text-blue-800";case"dependency":return"bg-orange-100 text-orange-800";case"today_task":return"bg-green-100 text-green-800";case"project_admin":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(s.type)}`,children:s.type}),!s.isRead&&(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),s.soundRequired&&(0,t.jsx)(r.Badge,{variant:"destructive",className:"text-xs",children:"Critical"})]}),(0,t.jsxs)(j.default,{href:"task"===s.entityType&&s.entityId?`/dashboard/projects/${e}/tasks/${s.entityId}`:`/dashboard/projects/${e}`,className:"block",children:[(0,t.jsx)("p",{className:"font-medium",children:s.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:s.message})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:(0,u.formatDistanceToNow)(new Date(s.createdAt),{addSuffix:!0})})]}),!s.isRead&&(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>I(s.id),children:(0,t.jsx)(x.Check,{className:"h-4 w-4"})})]})},s.id))}),L>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>C(e=>Math.max(1,e-1)),disabled:1===k,children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",k," of ",L]}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>C(e=>Math.min(L,e+1)),disabled:k===L,children:"Next"})]})]})]})]})}e.s(["ProjectNotificationCenter",()=>g],115065)}]);