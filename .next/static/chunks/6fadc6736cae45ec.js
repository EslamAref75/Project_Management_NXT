(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,586454,e=>{"use strict";var t=e.i(696009),a=e.i(181340),s=e.i(91622),r=e.i(479093),l=e.i(813606),n=e.i(620770),i=e.i(364850),c=e.i(956569);function o({value:e,onChange:a,onClear:s}){return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(l.Input,{type:"text",placeholder:"Search projects by name or client...",value:e,onChange:e=>a(e.target.value),className:"pl-10 pr-10"}),e&&(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2",onClick:s,children:(0,t.jsx)(i.X,{className:"h-4 w-4"})})]})}var d=e.i(304077),x=e.i(594652),m=e.i(936358),h=e.i(35490),u=e.i(315811),p=e.i(678892),g=e.i(62238),j=e.i(142113);let f=["planned","active","on_hold","completed","cancelled"];function v({categoryFilter:e,onCategoryChange:a,statusFilter:s,onStatusChange:r,dateRange:l,onDateRangeChange:n,projectManagerFilter:o,onProjectManagerChange:v,users:b,projectTypes:N=[],onClear:y,priorityFilter:w=[]}){let D=e.length>0||s.length>0||w.length>0||l.start||l.end||"all"!==o;return(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{className:"text-xs",children:"Category"}),(0,t.jsxs)(p.Popover,{children:[(0,t.jsx)(p.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",className:"h-9",children:[(0,t.jsx)(u.Filter,{className:"h-4 w-4 mr-2"}),"Category",e.length>0&&(0,t.jsx)(h.Badge,{variant:"secondary",className:"ml-2",children:e.length})]})}),(0,t.jsx)(p.PopoverContent,{className:"w-56",align:"start",children:(0,t.jsx)("div",{className:"space-y-2",children:0===N.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground p-2",children:"No project types available"}):N.map(s=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.Checkbox,{id:`cat-${s.id}`,checked:e.includes(s.name),onCheckedChange:()=>{var t;return t=s.name,void(e.includes(t)?a(e.filter(e=>e!==t)):a([...e,t]))}}),(0,t.jsxs)("label",{htmlFor:`cat-${s.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex items-center gap-2",children:[s.color&&(0,t.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:s.color}}),s.name]})]},s.id))})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{className:"text-xs",children:"Status"}),(0,t.jsxs)(p.Popover,{children:[(0,t.jsx)(p.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",className:"h-9",children:[(0,t.jsx)(u.Filter,{className:"h-4 w-4 mr-2"}),"Status",s.length>0&&(0,t.jsx)(h.Badge,{variant:"secondary",className:"ml-2",children:s.length})]})}),(0,t.jsx)(p.PopoverContent,{className:"w-56",align:"start",children:(0,t.jsx)("div",{className:"space-y-2",children:f.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.Checkbox,{id:`status-${e}`,checked:s.includes(e),onCheckedChange:()=>{s.includes(e)?r(s.filter(t=>t!==e)):r([...s,e])}}),(0,t.jsx)("label",{htmlFor:`status-${e}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 capitalize cursor-pointer",children:e.replace("_"," ")})]},e))})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{className:"text-xs",children:"Date Range"}),(0,t.jsx)(g.DatePickerWithRange,{date:{from:l.start,to:l.end},setDate:e=>{n({start:e?.from,end:e?.to})},className:"w-[240px]"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{className:"text-xs",children:"Project Manager"}),(0,t.jsxs)(m.Select,{value:o,onValueChange:v,children:[(0,t.jsx)(m.SelectTrigger,{className:"w-[180px] h-9",children:(0,t.jsx)(m.SelectValue,{placeholder:"All Managers"})}),(0,t.jsxs)(m.SelectContent,{children:[(0,t.jsx)(m.SelectItem,{value:"all",children:"All Managers"}),b.map(e=>(0,t.jsx)(m.SelectItem,{value:e.id.toString(),children:e.username},e.id))]})]})]}),D&&(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:y,children:[(0,t.jsx)(i.X,{className:"h-4 w-4 mr-2"}),"Clear All"]})})]})})})}var b=e.i(612498),N=e.i(278501);function y({viewMode:e,onViewChange:a}){return(0,t.jsxs)("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[(0,t.jsxs)(c.Button,{variant:"card"===e?"default":"ghost",size:"sm",onClick:()=>a("card"),className:(0,s.cn)("h-8","card"===e&&"bg-primary text-primary-foreground"),children:[(0,t.jsx)(b.LayoutGrid,{className:"h-4 w-4 mr-2"}),"Cards"]}),(0,t.jsxs)(c.Button,{variant:"table"===e?"default":"ghost",size:"sm",onClick:()=>a("table"),className:(0,s.cn)("h-8","table"===e&&"bg-primary text-primary-foreground"),children:[(0,t.jsx)(N.Table,{className:"h-4 w-4 mr-2"}),"Table"]})]})}var w=e.i(924130),D=e.i(374752),C=e.i(501529),S=e.i(949899),S=S,P=e.i(776827),k=e.i(846420),T=e.i(968563),M=e.i(963904),I=e.i(237122),A=e.i(613205),B=e.i(799038),F=e.i(483287),R=e.i(238016),L=e.i(512845),U=e.i(745999);let E=(0,U.createServerReference)("40fdba31998d7a3efe7c944c688cf93002e917af7b",U.callServer,void 0,U.findSourceMapURL,"deleteProject");var H=e.i(21131),z=e.i(453455),$=e.i(605350),O=e.i(69346);function _({projects:e,total:a,page:s,limit:l,onPageChange:n,onProjectDeleted:i}){let c=Math.ceil(a/l),{data:o}=(0,L.useSession)();return((0,r.useRouter)(),0===e.length)?(0,t.jsxs)("div",{className:"flex min-h-[400px] flex-col items-center justify-center rounded-md border border-dashed p-8 text-center",children:[(0,t.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-accent",children:(0,t.jsx)(S.default,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No projects found"}),(0,t.jsx)("p",{className:"mb-4 mt-2 text-sm text-muted-foreground max-w-sm",children:"Try adjusting your filters or create a new project."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>{let a,s=0===(a=e.tasks||[]).length?0:Math.round(a.filter(e=>"completed"===e.status).length/a.length*100),r=o?.user?.id?parseInt(o.user.id):0,l=o?.user?.role||"developer",n="admin"===l,c=e.createdById===r,d="project_manager"===l||n,x=n||c,m=n||c,h=(n||d)&&"urgent"!==e.priority,u=(n||d)&&"urgent"===e.priority;return(0,t.jsx)(V,{project:e,progress:s,statusColors:{active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",on_hold:"bg-yellow-100 text-yellow-800",planned:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},canEdit:x,canDelete:m,canMarkUrgent:h,canRemoveUrgent:u,onDeleted:i},e.id)})}),c>1&&(0,t.jsx)(O.Pagination,{children:(0,t.jsxs)(O.PaginationContent,{children:[(0,t.jsx)(O.PaginationItem,{children:(0,t.jsx)(O.PaginationPrevious,{onClick:()=>s>1&&n(s-1),className:1===s?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:c},(e,t)=>t+1).map(e=>(0,t.jsx)(O.PaginationItem,{children:(0,t.jsx)(O.PaginationLink,{onClick:()=>n(e),isActive:e===s,className:"cursor-pointer",children:e})},e)),(0,t.jsx)(O.PaginationItem,{children:(0,t.jsx)(O.PaginationNext,{onClick:()=>s<c&&n(s+1),className:s===c?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})}function V({project:e,progress:l,statusColors:n,canEdit:i,canDelete:o,canMarkUrgent:x=!1,canRemoveUrgent:m=!1,onDeleted:u}){let[p,g]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1),N=(0,r.useRouter)(),y=async()=>{b(!0);let t=await E(e.id);b(!1),g(!1),t.success?(u&&u(),N.refresh()):alert(t.error||"Failed to delete project")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Card,{className:"transition-shadow hover:shadow-md h-full relative group",children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(w.default,{href:`/dashboard/projects/${e.id}`,className:"flex-1",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(h.Badge,{variant:"secondary",className:"text-xs capitalize",children:e.type}),"urgent"===e.priority&&(0,t.jsx)(h.Badge,{variant:"destructive",className:"text-xs animate-pulse",children:"ğŸš¨ URGENT"}),"high"===e.priority&&(0,t.jsx)(h.Badge,{variant:"outline",className:"text-xs border-orange-500 text-orange-700",children:"High"})]}),(0,t.jsx)(d.CardTitle,{className:"text-xl font-semibold line-clamp-1",children:e.name})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Badge,{className:(0,s.cn)("text-xs",n[e.status]||"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")}),(i||o)&&(0,t.jsxs)(F.DropdownMenu,{children:[(0,t.jsx)(F.DropdownMenuTrigger,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)(T.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(F.DropdownMenuContent,{align:"end",onClick:e=>e.stopPropagation(),children:[i&&(0,t.jsxs)(F.DropdownMenuItem,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f(!0)},children:[(0,t.jsx)(M.Edit,{className:"h-4 w-4 mr-2"}),"Edit Project"]}),x&&(0,t.jsxs)(t.Fragment,{children:[(i||o)&&(0,t.jsx)(F.DropdownMenuSeparator,{}),(0,t.jsx)(z.MarkUrgentDialog,{projectId:e.id,projectName:e.name,children:(0,t.jsxs)(F.DropdownMenuItem,{onSelect:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,t.jsx)(A.AlertTriangle,{className:"h-4 w-4 mr-2"}),"Make Urgent"]})})]}),m&&(0,t.jsxs)(t.Fragment,{children:[(i||o||x)&&(0,t.jsx)(F.DropdownMenuSeparator,{}),(0,t.jsx)($.RemoveUrgentDialog,{projectId:e.id,projectName:e.name,children:(0,t.jsxs)(F.DropdownMenuItem,{onSelect:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,t.jsx)(B.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Remove Urgent"]})})]}),o&&(0,t.jsxs)(t.Fragment,{children:[(i||x)&&(0,t.jsx)(F.DropdownMenuSeparator,{}),(0,t.jsxs)(F.DropdownMenuItem,{onClick:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(I.Trash2,{className:"h-4 w-4 mr-2"}),"Delete Project"]})]})]})]})]})]}),(0,t.jsx)(w.default,{href:`/dashboard/projects/${e.id}`,children:(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,t.jsx)(d.CardDescription,{className:"line-clamp-2 min-h-[40px]",children:e.description||"No description provided."}),e.tasks&&e.tasks.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Progress"}),(0,t.jsxs)("span",{className:"font-medium",children:[l,"%"]})]}),(0,t.jsx)(D.Progress,{value:l,className:"h-2"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.startDate&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(P.Calendar,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:(0,C.format)(new Date(e.startDate),"MMM d, yyyy")})]}),e.endDate&&e.startDate&&(0,t.jsx)("span",{children:"â†’"}),e.endDate&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(P.Calendar,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:(0,C.format)(new Date(e.endDate),"MMM d, yyyy")})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,t.jsx)(S.default,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.tasks?.length||0," tasks"]})]}),e.projectManager&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.Users,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.projectManager.username})]})]})]})})]}),i&&(0,t.jsx)(H.ProjectEditDialog,{project:{id:e.id,name:e.name,type:e.type,projectTypeId:e.projectTypeId||null,projectStatusId:e.projectStatusId||null,description:e.description||null,scope:e.scope||null,status:e.status,startDate:e.startDate?new Date(e.startDate):null,endDate:e.endDate?new Date(e.endDate):null},open:j,onOpenChange:f}),o&&(0,t.jsx)(R.AlertDialog,{open:p,onOpenChange:g,children:(0,t.jsxs)(R.AlertDialogContent,{children:[(0,t.jsxs)(R.AlertDialogHeader,{children:[(0,t.jsxs)(R.AlertDialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(A.AlertTriangle,{className:"h-5 w-5 text-red-600"}),"Delete Project"]}),(0,t.jsxs)(R.AlertDialogDescription,{children:["Are you sure you want to delete ",(0,t.jsx)("strong",{children:e.name}),"?",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"This action cannot be undone. All tasks, dependencies, and related data will be permanently deleted.",e.tasks&&e.tasks.length>0&&(0,t.jsxs)("span",{className:"block mt-2 text-red-600 font-medium",children:["This project has ",e.tasks.length," task(s) that will also be deleted."]})]})]}),(0,t.jsxs)(R.AlertDialogFooter,{children:[(0,t.jsx)(R.AlertDialogCancel,{disabled:v,children:"Cancel"}),(0,t.jsx)(R.AlertDialogAction,{onClick:y,disabled:v,className:"bg-red-600 hover:bg-red-700",children:v?"Deleting...":"Delete Project"})]})]})})]})}var q=e.i(954871),G=e.i(690831),K=e.i(402142),W=e.i(651001),X=e.i(712321);function J({projects:e,total:r,page:l,limit:n,onPageChange:i,users:o}){let[d,x]=(0,a.useState)(null),[m,u]=(0,a.useState)("asc"),p=[...e].sort((e,t)=>{let a,s;if(!d)return 0;switch(d){case"name":a=e.name.toLowerCase(),s=t.name.toLowerCase();break;case"status":a=e.status,s=t.status;break;case"progress":let r=e.tasks||[],l=t.tasks||[];a=r.length>0?r.filter(e=>"completed"===e.status).length/r.length:0,s=l.length>0?l.filter(e=>"completed"===e.status).length/l.length:0;break;case"startDate":a=e.startDate?new Date(e.startDate).getTime():0,s=t.startDate?new Date(t.startDate).getTime():0;break;case"endDate":a=e.endDate?new Date(e.endDate).getTime():0,s=t.endDate?new Date(t.endDate).getTime():0;break;default:return 0}return a<s?"asc"===m?-1:1:a>s?"asc"===m?1:-1:0}),g=Math.ceil(r/n),j=(e,a)=>(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",className:"h-8 data-[state=open]:bg-accent",onClick:()=>{d===e?u("asc"===m?"desc":"asc"):(x(e),u("asc"))},children:[a,d===e?"asc"===m?(0,t.jsx)(W.ArrowUp,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(X.ArrowDown,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(K.ArrowUpDown,{className:"ml-2 h-4 w-4 opacity-50"})]});return 0===e.length?(0,t.jsxs)("div",{className:"flex min-h-[400px] flex-col items-center justify-center rounded-md border border-dashed p-8 text-center",children:[(0,t.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No projects found"}),(0,t.jsx)("p",{className:"mb-4 mt-2 text-sm text-muted-foreground max-w-sm",children:"Try adjusting your filters or create a new project."})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(q.Table,{children:[(0,t.jsx)(q.TableHeader,{children:(0,t.jsxs)(q.TableRow,{children:[(0,t.jsx)(q.TableHead,{children:j("name","Project Name")}),(0,t.jsx)(q.TableHead,{children:"Category"}),(0,t.jsx)(q.TableHead,{children:j("status","Status")}),(0,t.jsx)(q.TableHead,{children:j("progress","Progress")}),(0,t.jsx)(q.TableHead,{children:j("startDate","Start Date")}),(0,t.jsx)(q.TableHead,{children:j("endDate","End Date")}),(0,t.jsx)(q.TableHead,{children:"Project Manager"}),(0,t.jsx)(q.TableHead,{children:"Tasks"})]})}),(0,t.jsx)(q.TableBody,{children:p.map(e=>{let a,r=0===(a=e.tasks||[]).length?0:Math.round(a.filter(e=>"completed"===e.status).length/a.length*100);return(0,t.jsxs)(q.TableRow,{className:"cursor-pointer hover:bg-muted/50",children:[(0,t.jsx)(q.TableCell,{children:(0,t.jsx)(w.default,{href:`/dashboard/projects/${e.id}`,className:"font-medium hover:underline",children:e.name})}),(0,t.jsx)(q.TableCell,{children:(0,t.jsx)(h.Badge,{variant:"secondary",className:"capitalize",children:e.type})}),(0,t.jsx)(q.TableCell,{children:(0,t.jsx)(h.Badge,{className:(0,s.cn)("text-xs",{active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",on_hold:"bg-yellow-100 text-yellow-800",planned:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"}[e.status]||"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})}),(0,t.jsx)(q.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2 w-32",children:[(0,t.jsx)(D.Progress,{value:r,className:"h-2 flex-1"}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground w-10",children:[r,"%"]})]})}),(0,t.jsx)(q.TableCell,{children:e.startDate?(0,t.jsx)("span",{className:"text-sm",children:(0,C.format)(new Date(e.startDate),"MMM d, yyyy")}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€”"})}),(0,t.jsx)(q.TableCell,{children:e.endDate?(0,t.jsx)("span",{className:"text-sm",children:(0,C.format)(new Date(e.endDate),"MMM d, yyyy")}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€”"})}),(0,t.jsx)(q.TableCell,{children:e.projectManager?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(G.Avatar,{className:"h-6 w-6",children:[(0,t.jsx)(G.AvatarImage,{src:e.projectManager.avatarUrl||void 0}),(0,t.jsx)(G.AvatarFallback,{className:"text-xs",children:e.projectManager.username.substring(0,2).toUpperCase()})]}),(0,t.jsx)("span",{className:"text-sm",children:e.projectManager.username})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€”"})}),(0,t.jsx)(q.TableCell,{children:(0,t.jsx)("span",{className:"text-sm",children:e.tasks?.length||0})})]},e.id)})})]})}),g>1&&(0,t.jsx)(O.Pagination,{children:(0,t.jsxs)(O.PaginationContent,{children:[(0,t.jsx)(O.PaginationItem,{children:(0,t.jsx)(O.PaginationPrevious,{onClick:()=>l>1&&i(l-1),className:1===l?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:g},(e,t)=>t+1).map(e=>(0,t.jsx)(O.PaginationItem,{children:(0,t.jsx)(O.PaginationLink,{onClick:()=>i(e),isActive:e===l,className:"cursor-pointer",children:e})},e)),(0,t.jsx)(O.PaginationItem,{children:(0,t.jsx)(O.PaginationNext,{onClick:()=>l<g&&i(l+1),className:l===g?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})}var Q=e.i(690905);let Y=(0,U.createServerReference)("401e3f4be30a5d5dbee04214aa788c798e018c4c21",U.callServer,void 0,U.findSourceMapURL,"createProject");var Z=e.i(67693),ee=e.i(776574),et=e.i(588813);function ea({onProjectCreated:e}){let[s,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[d,h]=(0,a.useState)([]),[u,p]=(0,a.useState)(!0),g=(0,r.useRouter)();async function j(t){t.preventDefault(),o(!0);let a=new FormData(t.currentTarget),s=await Y(a);if(o(!1),s?.success){n(!1);let a=t.currentTarget;a&&a.reset(),g.refresh(),e&&e()}else alert(s?.error||"Failed to create project")}return(0,a.useEffect)(()=>{async function e(){p(!0);let e=await (0,Z.getProjectTypes)(!1);p(!1),e.success&&h(e.projectTypes||[])}s&&e()},[s]),(0,t.jsxs)(Q.Dialog,{open:s,onOpenChange:n,children:[(0,t.jsx)(Q.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{children:[(0,t.jsx)(et.Plus,{className:"mr-2 h-4 w-4"}),"New Project"]})}),(0,t.jsxs)(Q.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(Q.DialogHeader,{children:[(0,t.jsx)(Q.DialogTitle,{children:"Create New Project"}),(0,t.jsx)(Q.DialogDescription,{children:"Configure your project with details, timeline, and team structure."})]}),(0,t.jsxs)("form",{onSubmit:j,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.Label,{htmlFor:"name",children:"Project Name *"}),(0,t.jsx)(l.Input,{id:"name",name:"name",placeholder:"E-commerce Platform",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.Label,{htmlFor:"projectTypeId",children:"Project Type *"}),(0,t.jsxs)(m.Select,{name:"projectTypeId",required:!0,disabled:u,children:[(0,t.jsx)(m.SelectTrigger,{id:"projectTypeId",children:(0,t.jsx)(m.SelectValue,{placeholder:u?"Loading types...":"Select project type"})}),(0,t.jsx)(m.SelectContent,{children:0!==d.length||u?d.map(e=>(0,t.jsx)(m.SelectItem,{value:e.id.toString(),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.color&&(0,t.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{children:e.name})]})},e.id)):(0,t.jsx)(m.SelectItem,{value:"",disabled:!0,children:"No project types available. Please create one in Settings."})})]}),(0,t.jsx)("input",{type:"hidden",name:"type",value:""})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)("textarea",{id:"description",name:"description",placeholder:"Brief overview of the project goals and purpose...",rows:3,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.Label,{htmlFor:"scope",children:"Project Scope"}),(0,t.jsx)("textarea",{id:"scope",name:"scope",placeholder:"Define deliverables, features, and boundaries...",rows:3,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.Label,{htmlFor:"startDate",children:"Start Date"}),(0,t.jsx)(l.Input,{id:"startDate",name:"startDate",type:"date"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.Label,{htmlFor:"endDate",children:"Target End Date"}),(0,t.jsx)(l.Input,{id:"endDate",name:"endDate",type:"date"})]})]}),(0,t.jsx)("input",{type:"hidden",name:"projectManagerId",value:""})]}),(0,t.jsxs)(Q.DialogFooter,{children:[(0,t.jsx)(c.Button,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,t.jsxs)(c.Button,{type:"submit",disabled:i,children:[i&&(0,t.jsx)(ee.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Project"]})]})]})]})]})}var es=e.i(782199),er=e.i(640624);let el=(0,U.createServerReference)("406144e6cbbfbe91083d4680cc56756da14a65698a",U.callServer,void 0,U.findSourceMapURL,"getProjectsWithFilters");var en=e.i(946534),S=S,ei=e.i(290283),ei=ei;function ec({initialProjects:e,initialTotal:l,users:n,stats:i}){let c=(0,r.useRouter)(),d=(0,r.useSearchParams)(),[x,m]=(0,a.useState)(e),[h,u]=(0,a.useState)(l),[p,g]=(0,a.useState)(!1),[j,f]=(0,a.useState)(null),[b,N]=(0,a.useState)(d.get("view")||"card"),[w,D]=(0,a.useState)([]),[C,P]=(0,a.useState)(d.get("search")||""),[k,T]=(0,a.useState)(d.get("category")?.split(",").filter(Boolean)||[]),[M,I]=(0,a.useState)(d.get("status")?.split(",").filter(Boolean)||[]),[F,R]=(0,a.useState)({start:d.get("startDate")?new Date(d.get("startDate")):void 0,end:d.get("endDate")?new Date(d.get("endDate")):void 0}),[L,U]=(0,a.useState)(d.get("projectManager")||"all"),[E,H]=(0,a.useState)(d.get("priority")?.split(",").filter(Boolean)||[]),[z,$]=(0,a.useState)(parseInt(d.get("page")||"1")),[O]=(0,a.useState)(12),V=(0,a.useRef)(!1);(0,a.useEffect)(()=>{!async function(){let e=await (0,Z.getProjectTypes)(!1);e.success&&D(e.projectTypes||[])}()},[]);let q=(0,a.useCallback)(()=>{let e=new URLSearchParams;C&&e.set("search",C),k.length>0&&e.set("category",k.join(",")),M.length>0&&e.set("status",M.join(",")),F.start&&e.set("startDate",F.start.toISOString().split("T")[0]),F.end&&e.set("endDate",F.end.toISOString().split("T")[0]),"all"!==L&&e.set("projectManager",L),E.length>0&&e.set("priority",E.join(",")),"card"!==b&&e.set("view",b),z>1&&e.set("page",z.toString()),c.push(`/dashboard/projects?${e.toString()}`,{scroll:!1});let t=`${window.location.pathname}?${e.toString()}`;window.history.pushState(null,"",t)},[C,k,M,E,F,L,b,z]),G=(0,a.useCallback)(async()=>{g(!0),f(null);try{let e=await el({search:C,category:k,status:M,startDate:F.start?.toISOString(),endDate:F.end?.toISOString(),projectManager:"all"!==L?L:void 0,priority:E,page:z,limit:O});e.success?(m(e.projects||[]),u(e.total||0)):f(e.error||"Failed to load projects")}catch(e){f(e.message||"An error occurred")}finally{g(!1)}},[C,k,M,E,F,L,z,O]);(0,a.useEffect)(()=>{let e=setTimeout(()=>{$(1),G(),q()},400);return()=>clearTimeout(e)},[C]),(0,a.useEffect)(()=>{V.current?($(1),G(),q()):V.current=!0},[k,M,E,F,L,b]),(0,a.useEffect)(()=>{V.current&&1!==z&&(G(),q())},[z]);let K=()=>{P(""),T([]),I([]),H([]),R({}),U("all"),$(1)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your projects and track progress"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(y,{viewMode:b,onViewChange:e=>{N(e),q()}}),(0,t.jsx)(ea,{onProjectCreated:G})]})]}),(0,t.jsx)(en.SummaryStatsCards,{cards:[{label:"Total Projects",value:i.total,icon:(0,t.jsx)(S.default,{}),color:"default",onClick:()=>{T([]),I([]),H([]),U("all"),P(""),R({})},active:0===M.length&&0===E.length&&0===k.length},{label:"Active",value:i.active,icon:(0,t.jsx)(ei.default,{}),color:"blue",onClick:()=>{I(["active"]),H([])},active:M.includes("active")&&1===M.length&&0===E.length},{label:"Completed",value:i.completed,icon:(0,t.jsx)(B.CheckCircle2,{}),color:"green",onClick:()=>{I(["completed"]),H([])},active:M.includes("completed")&&1===M.length},{label:"Urgent",value:i.urgent,icon:(0,t.jsx)(A.AlertTriangle,{}),color:"red",onClick:()=>{H(["urgent"]),I([])},active:E.includes("urgent")}]}),(0,t.jsx)(o,{value:C,onChange:P,onClear:()=>{P(""),K()}}),(0,t.jsx)(v,{categoryFilter:k,onCategoryChange:T,statusFilter:M,onStatusChange:I,dateRange:F,onDateRangeChange:R,projectManagerFilter:L,onProjectManagerChange:U,users:n,projectTypes:w,onClear:K,priorityFilter:E}),j&&(0,t.jsxs)(er.Alert,{variant:"destructive",children:[(0,t.jsx)(es.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(er.AlertDescription,{children:j})]}),(0,t.jsxs)("div",{className:"relative min-h-[400px]",children:[p&&(0,t.jsx)("div",{className:"absolute inset-0 z-10 bg-background/50 backdrop-blur-sm flex items-center justify-center rounded-lg transition-all duration-200",children:(0,t.jsx)(ee.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),(0,t.jsx)("div",{className:(0,s.cn)("transition-opacity duration-200",p?"opacity-50":"opacity-100"),children:"card"===b?(0,t.jsx)(_,{projects:x,total:h,page:z,limit:O,onPageChange:$,onProjectDeleted:G}):(0,t.jsx)(J,{projects:x,total:h,page:z,limit:O,onPageChange:$,users:n,onProjectDeleted:G})})]})]})}e.s(["ProjectsDashboard",()=>ec],586454)}]);